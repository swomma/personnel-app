var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,a){(n||!hasProp(e,a))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[a]=t:(e[a]||(e[a]={}),mixin(e[a],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var a=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return a.requireType=e,a.requireModules=i,n&&(a.originalError=n),a}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var a,r,s,o,l,c,h,u,d,p,m,f,g=n&&n.split("/"),v=A.map,b=v&&v["*"];if(e&&(e=e.split("/"),h=e.length-1,A.nodeIdCompat&&jsSuffixRegExp.test(e[h])&&(e[h]=e[h].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(f=g.slice(0,g.length-1),e=f.concat(e)),t(e),e=e.join("/")),i&&v&&(g||b)){s=e.split("/");e:for(o=s.length;o>0;o-=1){if(c=s.slice(0,o).join("/"),g)for(l=g.length;l>0;l-=1)if(r=getOwn(v,g.slice(0,l).join("/")),r&&(r=getOwn(r,c))){u=r,d=o;break e}!p&&b&&getOwn(b,c)&&(p=getOwn(b,c),m=o)}!u&&p&&(u=p,d=m),u&&(s.splice(0,d,u),e=s.join("/"))}return a=getOwn(A.pkgs,e),a?a:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function a(e){var t=getOwn(A.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),_.require.undef(e),_.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function r(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(e,t,i,a){var s,o,l,c,h=null,u=t?t.name:null,d=e,p=!0,m="";return e||(p=!1,e="_@r"+(O+=1)),c=r(e),h=c[0],e=c[1],h&&(h=n(h,u,a),o=getOwn(I,h)),e&&(h?m=o&&o.normalize?o.normalize(e,function(e){return n(e,u,a)}):-1===e.indexOf("!")?n(e,u,a):e:(m=n(e,u,a),c=r(m),h=c[0],m=c[1],i=!0,s=_.nameToUrl(m))),l=!h||o||i?"":"_unnormalized"+(R+=1),{prefix:h,name:m,parentMap:t,unnormalized:!!l,url:s,originalName:d,isDefine:p,id:(h?h+"!"+m:m)+l}}function o(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new _.Module(e)),n}function l(e,t,n){var i=e.id,a=getOwn(k,i);!hasProp(I,i)||a&&!a.defineEmitComplete?(a=o(e),a.error&&"error"===t?n(a.error):a.on(t,n)):"defined"===t&&n(I[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function h(){globalDefQueue.length&&(apsp.apply(N,[N.length,0].concat(globalDefQueue)),globalDefQueue=[])}function u(e){delete k[e],delete S[e]}function d(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,a){var r=i.id,s=getOwn(k,r);!s||e.depMatched[a]||n[r]||(getOwn(t,r)?(e.defineDep(a,I[r]),e.check()):d(s,t,n))}),n[i]=!0)}function p(){var e,t,n=1e3*A.waitSeconds,r=n&&_.startTime+n<(new Date).getTime(),s=[],o=[],l=!1,h=!0;if(!b){if(b=!0,eachProp(S,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||o.push(e),!e.error))if(!e.inited&&r)a(c)?(t=!0,l=!0):(s.push(c),i(c));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return h=!1}),r&&s.length)return e=makeError("timeout","Load timeout for modules: "+s,null,s),e.contextName=_.contextName,c(e);h&&each(o,function(e){d(e,{},{})}),r&&!t||!l||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),b=!1}}function m(e){hasProp(I,e[0])||o(s(e[0],null,!0)).init(e[1],e[2])}function f(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return f(t,_.onScriptLoad,"load","onreadystatechange"),f(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(h();N.length;){if(e=N.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var b,y,_,w,x,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},S={},E={},N=[],I={},F={},C={},O=1,R=1;return w={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?I[e.map.id]=e.exports:e.exports=I[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(E,e.id)||{},this.map=e,this.shim=getOwn(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?void _.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,a=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=_.execCb(n,r,i,a)}catch(s){e=s}else a=_.execCb(n,r,i,a);if(this.map.isDefine&&void 0===a&&(t=this.module,t?a=t.exports:this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else a=r;this.exports=a,this.map.isDefine&&!this.ignore&&(I[n]=a,req.onResourceLoad&&req.onResourceLoad(_,this.map,this.depMaps)),u(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=s(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var a,r,h,d=getOwn(C,this.map.id),p=this.map.name,m=this.map.parentMap?this.map.parentMap.name:null,f=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return n(e,m,!0)})||""),r=s(e.prefix+"!"+p,this.map.parentMap),l(r,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=getOwn(k,r.id),void(h&&(this.depMaps.push(r),this.events.error&&h.on("error",bind(this,function(e){this.emit("error",e)})),h.enable()))):d?(this.map.url=_.nameToUrl(d),void this.load()):(a=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),a.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&u(e.map.id)}),c(e)}),a.fromText=bind(this,function(n,i){var r=e.name,l=s(r),h=useInteractive;i&&(n=i),h&&(useInteractive=!1),o(l),hasProp(A.config,t)&&(A.config[r]=A.config[t]);try{req.exec(n)}catch(u){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+u,u,[t]))}h&&(useInteractive=!0),this.depMaps.push(l),_.completeLoad(r),f([r],a)}),void i.load(e.name,f,a,A))})),_.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,a;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,a=getOwn(w,e.id))return void(this.depExports[t]=a(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=k[n],hasProp(w,n)||!i||i.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:A,contextName:e,registry:k,defined:I,urlFetched:F,defQueue:N,Module:y,makeModuleMap:s,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(A[t]||(A[t]={}),mixin(A[t],e,!0,!0)):A[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(C[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(A.paths[n]=e.location),A.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=s(t))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,a){function r(n,i,l){var h,u,d;return a.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,n)?w[n](k[t.id]):req.get?req.get(_,n,t,r):(u=s(n,t,!1,!0),h=u.id,hasProp(I,h)?I[h]:c(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),d=o(s(null,t)),d.skipMap=a.skipMap,d.init(n,i,l,{enabled:!0}),p()}),r)}return a=a||{},mixin(r,{isBrowser:isBrowser,toUrl:function(e){var i,a=e.lastIndexOf("."),r=e.split("/")[0],s="."===r||".."===r;return-1!==a&&(!s||a>1)&&(i=e.substring(a,e.length),e=e.substring(0,a)),_.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(I,s(e,t,!1,!0).id)},specified:function(e){return e=s(e,t,!1,!0).id,hasProp(I,e)||hasProp(k,e)}}),t||(r.undef=function(e){h();var n=s(e,t,!0),a=getOwn(k,e);i(e),delete I[e],delete F[n.url],delete E[e],eachReverse(N,function(t,n){t[0]===e&&N.splice(n,1)}),a&&(a.events.defined&&(E[e]=a.events),u(e))}),r},enable:function(e){var t=getOwn(k,e.id);t&&o(e).enable()},completeLoad:function(e){var t,n,i,r=getOwn(A.shim,e)||{},s=r.exports;for(h();N.length;){if(n=N.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);m(n)}if(i=getOwn(k,e),!t&&!hasProp(I,e)&&i&&!i.inited){if(!(!A.enforceDefine||s&&getGlobal(s)))return a(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));m([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,t,n){var i,a,r,s,o,l,c,h=getOwn(A.pkgs,e);if(h&&(e=h),c=getOwn(C,e))return _.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))o=e+(t||"");else{for(i=A.paths,a=e.split("/"),r=a.length;r>0;r-=1)if(s=a.slice(0,r).join("/"),l=getOwn(i,s)){isArray(l)&&(l=l[0]),a.splice(0,r,l);break}o=a.join("/"),o+=t||(/^data\:|\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+o}return A.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+A.urlArgs):o},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return a(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var a,r,s=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(s=r.context),a=getOwn(contexts,s),a||(a=contexts[s]=req.s.newContext(s)),r&&a.configure(r),a.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,a=e&&e.config||{};if(isBrowser)return i=req.createNode(a,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,a;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),a=contexts[i.getAttribute("data-requirecontext")])),(a?a.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){});var Handlebars=function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof s?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(l,t):e):""}function a(e){return e||0===e?d(e)&&0===e.length?!0:!1:!0}var r={},s=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;r.extend=n;var h=Object.prototype.toString;r.toString=h;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var u;r.isFunction=u;var d=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};return r.isArray=d,r.escapeExpression=i,r.isEmpty=a,r}(e),n=function(){function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),r=0;r<n.length;r++)this[n[r]]=a[n[r]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},a=n.fn;return d(t)&&(t=t.call(this)),t===!0?a(this):t===!1||null==t?i(this):u(t)?t.length>0?e.helpers.each(t,n):i(this):a(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,a=t.inverse,r=0,s="";if(d(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(u(e))for(var o=e.length;o>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===e.length-1),s+=i(e[r],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=r,n.first=0===r),s+=i(e[l],{data:n}),r++);return 0===r&&(s=a(this)),s}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return d(e)&&(e=e.call(this)),s.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function a(e,t){f.log(e,t)}var r={},s=e,o=t,l="1.3.0";r.VERSION=l;var c=4;r.COMPILER_REVISION=c;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=h;var u=s.isArray,d=s.isFunction,p=s.toString,m="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:f,log:a,registerHelper:function(e,t,n){if(p.call(e)===m){if(n||t)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===m?s.extend(this.partials,e):this.partials[e]=t}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};r.logger=f,r.log=a;var g=function(e){var t={};return s.extend(t,e),t};return r.createFrame=g,r}(t,n),a=function(e,t,n){function i(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var i=p[n],a=p[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new u("No environment passed to template");var n=function(e,n,i,a,r,s){var o=t.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(t.compile){var l={helpers:a,partials:r,data:s};return r[n]=t.compile(e,{data:void 0!==s},t),r[n](i,l)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:h.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=s(e,t,n):i||(i=this.programs[e]=s(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},h.extend(n,t),h.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,a){a=a||{};var r,s,o=a.partial?a:t;a.partial||(r=a.helpers,s=a.partials);var l=e.call(i,o,n,r,s,a.data);return a.partial||t.VM.checkRevision(i.compilerInfo),l}}function r(e,t,n){var i=Array.prototype.slice.call(arguments,3),a=function(e,a){return a=a||{},t.apply(this,[e,a.data||n].concat(i))};return a.program=e,a.depth=i.length,a}function s(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,a,r){var s={partial:!0,helpers:i,partials:a,data:r};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,s):void 0}function l(){return""}var c={},h=e,u=t,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return c.checkRevision=i,c.template=a,c.programWithDepth=r,c.program=s,c.invokePartial=o,c.noop=l,c}(t,n,i),r=function(e,t,n,i,a){var r,s=e,o=t,l=n,c=i,h=a,u=function(){var e=new s.HandlebarsEnvironment;return c.extend(e,s),e.SafeString=o,e.Exception=l,e.Utils=c,e.VM=h,e.template=function(t){return h.template(t,e)},e},d=u();return d.create=u,r=d}(i,e,n,t,a),s=function(e){function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,a={ProgramNode:function(e,n,i,r){var s,o;3===arguments.length?(r=i,i=null):2===arguments.length&&(r=n,n=null),t.call(this,r),this.type="program",this.statements=e,this.strip={},i?(o=i[0],o?(s={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new a.ProgramNode(i,n,s)):this.inverse=new a.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,i,r,s){if(t.call(this,s),this.type="mustache",this.strip=r,null!=i&&i.charAt){var o=i.charAt(3)||i.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!i;this.sexpr=e instanceof a.SexprNode?e:new a.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var a=this.id=e[0],r=this.params=e.slice(1),s=this.eligibleHelper=a.isSimple;this.isHelper=s&&(r.length||n)},PartialNode:function(e,n,i,a){t.call(this,a),this.type="partial",this.partialName=e,this.context=n,this.strip=i},BlockNode:function(e,n,a,r,s){if(t.call(this,s),e.sexpr.id.original!==r.path.original)throw new i(e.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=a,this.strip={left:e.strip.left,right:r.strip.right},(n||a).strip.left=e.strip.right,(a||n).strip.right=r.strip.left,a&&!n&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var a="",r=[],s=0,o=0,l=e.length;l>o;o++){var c=e[o].part;if(a+=(e[o].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new i("Invalid path: "+a,this);".."===c?s++:this.isScoped=!0}else r.push(c)}this.original=a,this.parts=r,this.string=r.join("."),this.depth=s,this.isSimple=1===e.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return n=a}(n),o=function(){var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,i,a,r,s){var o=s.length-1;switch(r){case 1:return new a.ProgramNode(s[o-1],this._$);case 2:return new a.ProgramNode([],this._$);case 3:this.$=new a.ProgramNode([],s[o-1],s[o],this._$);break;case 4:this.$=new a.ProgramNode(s[o-2],s[o-1],s[o],this._$);break;case 5:this.$=new a.ProgramNode(s[o-1],s[o],[],this._$);break;case 6:this.$=new a.ProgramNode(s[o],this._$);break;case 7:this.$=new a.ProgramNode([],this._$);break;case 8:this.$=new a.ProgramNode([],this._$);break;case 9:this.$=[s[o]];break;case 10:s[o-1].push(s[o]),this.$=s[o-1];break;case 11:this.$=new a.BlockNode(s[o-2],s[o-1].inverse,s[o-1],s[o],this._$);break;case 12:this.$=new a.BlockNode(s[o-2],s[o-1],s[o-1].inverse,s[o],this._$);break;case 13:this.$=s[o];break;case 14:this.$=s[o];break;case 15:this.$=new a.ContentNode(s[o],this._$);break;case 16:this.$=new a.CommentNode(s[o],this._$);break;case 17:this.$=new a.MustacheNode(s[o-1],null,s[o-2],e(s[o-2],s[o]),this._$);break;case 18:this.$=new a.MustacheNode(s[o-1],null,s[o-2],e(s[o-2],s[o]),this._$);break;case 19:this.$={path:s[o-1],strip:e(s[o-2],s[o])};break;case 20:this.$=new a.MustacheNode(s[o-1],null,s[o-2],e(s[o-2],s[o]),this._$);break;case 21:this.$=new a.MustacheNode(s[o-1],null,s[o-2],e(s[o-2],s[o]),this._$);break;case 22:this.$=new a.PartialNode(s[o-2],s[o-1],e(s[o-3],s[o]),this._$);break;case 23:this.$=e(s[o-1],s[o]);break;case 24:this.$=new a.SexprNode([s[o-2]].concat(s[o-1]),s[o],this._$);break;case 25:this.$=new a.SexprNode([s[o]],null,this._$);break;case 26:this.$=s[o];break;case 27:this.$=new a.StringNode(s[o],this._$);break;case 28:this.$=new a.IntegerNode(s[o],this._$);break;case 29:this.$=new a.BooleanNode(s[o],this._$);break;case 30:this.$=s[o];break;case 31:s[o-1].isHelper=!0,this.$=s[o-1];break;case 32:this.$=new a.HashNode(s[o],this._$);break;case 33:this.$=[s[o-2],s[o]];break;case 34:this.$=new a.PartialNameNode(s[o],this._$);break;case 35:this.$=new a.PartialNameNode(new a.StringNode(s[o],this._$),this._$);break;case 36:this.$=new a.PartialNameNode(new a.IntegerNode(s[o],this._$));break;case 37:this.$=new a.DataNode(s[o],this._$);break;case 38:this.$=new a.IdNode(s[o],this._$);break;case 39:s[o-2].push({part:s[o],separator:s[o-1]}),this.$=s[o-2];break;case 40:this.$=[{part:s[o]}];break;case 43:this.$=[];break;case 44:s[o-1].push(s[o]);break;case 47:this.$=[s[o]];break;case 48:s[o-1].push(s[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],a=[null],r=[],s=this.table,o="",l=0,c=0,h=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,m,f,g,v,b,y,_,w,x={};;){if(f=i[i.length-1],this.defaultActions[f]?g=this.defaultActions[f]:((null===p||"undefined"==typeof p)&&(p=t()),g=s[f]&&s[f][p]),"undefined"==typeof g||!g.length||!g[0]){var A="";if(!h){w=[];for(b in s[f])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");A=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p);switch(g[0]){case 1:i.push(p),a.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(g[1]),p=null,m?(p=m,m=null):(c=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(y=this.productions_[g[1]][1],x.$=a[a.length-y],x._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,o,c,l,this.yy,g[1],a,r),"undefined"!=typeof v)return v;y&&(i=i.slice(0,-1*y*2),a=a.slice(0,-1*y),r=r.slice(0,-1*y)),i.push(this.productions_[g[1]][0]),a.push(x.$),r.push(x._$),_=s[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,a;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length&&(n=this._input.match(this.rules[r[s]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=s,this.options.flex));s++);return t?(a=t[0].match(/(?:\r\n?|\n).*/g),a&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){function n(e){return e.constructor===r.ProgramNode?e:(a.yy=r,a.parse(e))}var i={},a=e,r=t;return i.parser=a,i.parse=n,i}(o,s),c=function(e){function t(){}function n(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=n.parse(e),a=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(a,t)}function i(e,t,n){function i(){var i=n.parse(e),a=(new n.Compiler).compile(i,t),r=(new n.JavaScriptCompiler).compile(a,t,void 0,!0);return n.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var a;return function(e,t){return a||(a=i()),a.call(this,e,t)}}var a={},r=e;return a.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,n,i=this.opcodes,a=[],r=0,s=i.length;s>r;r++)if(e=i[r],"DECLARE"===e.opcode)a.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);a.push(e.opcode+" "+t.join(" "))}return a.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],a=e.opcodes[n];if(i.opcode!==a.opcode||i.args.length!==a.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==a.args[r])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var a=0,r=n.depths.list.length;r>a;a++)t=n.depths.list[a],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var a=t.sexpr,r=this.classifySexpr(a);"helper"===r?this.helperSexpr(a,n,i):"simple"===r?(this.simpleSexpr(a),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(a,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var a=0,r=i.length;r>a;a++)t=i[a],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,n){var i=e.id,a=i.parts[0],r=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",a,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),a=e.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",i.length,a);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+a,e);this.opcode("invokeHelper",i.length,a,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var a=e.id.parts[0];i.knownHelpers[a]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},a.precompile=n,a.compile=i,a}(n),h=function(e,t){function n(e){this.value=e}function i(){}var a,r=e.COMPILER_REVISION,s=e.REVISION_CHANGES,o=e.log,l=t;i.prototype={nameLookup:function(e,t){var n,a;return 0===e.indexOf("depth")&&(n=!0),a=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+a+")":a},compilerInfo:function(){var e=r,t=s[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var a,r=e.opcodes;this.i=0;for(var s=r.length;this.i<s;this.i++)a=r[this.i],"DECLARE"===a.opcode?this[a.name]=a.value:this[a.opcode].apply(this,a.args),a.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,r=this.environment.depths.list.length;r>a;a++)i.push("depth"+this.environment.depths.list[a]);var s=this.mergeSource();if(this.isChild||(s=this.compilerInfo()+s),e)return i.push(s),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+s+"}";return o("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var a=this.source[n];a.appendToBuffer?e=e?e+"\n    + "+a.content:a.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=a+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),a=this.nameLookup("depth"+this.lastContext,t,"context"),r="helper = "+i.name+" || "+a;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),a=this.nameLookup("depth"+this.lastContext,e,"context"),r=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+a+"; "+r+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var a=this.hash;t&&a.contexts.push("'"+e+"': "+t),n&&a.types.push("'"+e+"': "+n),a.values.push("'"+e+"': ("+i+")")},compiler:i,compileChildren:function(e,t){for(var n,i,a=e.children,r=0,s=a.length;s>r;r++){n=a[r],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,a=[n.index,n.name,"data"],r=0,s=i.length;s>r;r++)t=i[r],a.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+a.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,a,r="",s=this.isInline();if(s){var o=this.popStack(!0);if(o instanceof n)t=o.value,a=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var c=e.call(this,t);return s?(a||this.popStack(),i&&this.stackSlot--,this.push("("+r+c+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+r+c+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var a=e[t];a instanceof n?this.compileStack.push(a):this.pushStack(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof n?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],a=this.setupParams(e,i,n),r=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:a,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n,i,a,r=[],s=[],o=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),a=this.popStack(),(a||i)&&(a||(this.context.aliases.self="this",a="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+a));for(var l=0;e>l;l++)n=this.popStack(),t.push(n),this.options.stringParams&&(o.push(this.popStack()),s.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+s.join(",")+"]"),r.push("types:["+o.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=i.RESERVED_WORDS={},u=0,d=c.length;d>u;u++)h[c[u]]=!0;return i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},a=i}(i,n),u=function(e,t,n,i,a){var r,s=e,o=t,l=n.parser,c=n.parse,h=i.Compiler,u=i.compile,d=i.precompile,p=a,m=s.create,f=function(){var e=m();return e.compile=function(t,n){return u(t,n,e)},e.precompile=function(t,n){return d(t,n,e)},e.AST=o,e.Compiler=h,e.JavaScriptCompiler=p,e.Parser=l,e.parse=c,e};return s=f(),s.create=f,r=s}(r,s,l,c,h);return u}();define("handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("util",["jquery","underscore","handlebars","nprogress"],function(e,t,n,i){var a={};return a.loading=function(e){void 0!==e&&e?i.start():i.done()},a.scrollToTop=function(){e(window).scrollTop(0)},a.formatNumber=function(e,t){return isNaN(e)||null===e?e:(void 0!==t&&(e=t?Math.round(100*e)/100:Math.round(e)),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))},e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},a}),define("config",[],function(){return{baseUrl:"http://personnel.29th.org",apiHost:"http://api.29th.org",coatDir:"http://29th.org/coats",forumUrl:"http://new.29th.org/forums",vanillaCategoryEnlistments:62}}),define("models/assignment",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:function(){return i.apiHost+"/assignments"+(this.id?"/"+this.id:"")},parse:function(e){return e.assignment||{}},validation:{unit_id:{required:!0,pattern:"number"},position_id:{required:!0,pattern:"number"},start_date:{required:!0},access_level:{required:!0,pattern:"number"}}})}),define("models/discharge",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:function(){return i.apiHost+"/discharges/"+this.id},parse:function(e){return e.discharge||{}}})}),define("models/enlistment",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:function(){return i.apiHost+"/enlistments"+(this.id?"/"+this.id:"")},parse:function(e){return e.enlistment||{}},validation:{last_name:{required:!0,maxLength:40},first_name:{required:!0,maxLength:30},age:{required:!0},country_id:{required:!0},timezone:{required:!0},game:{required:!0},ingame_name:{required:!1,maxLength:60},steam_name:{required:!1,maxLength:60},steam_id:{required:!1,pattern:"number"},experience:{required:!0},recruiter:{required:!1,maxLength:128},unit_id:{required:!0},status:{required:!0}}})}),define("models/event",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:function(){return i.apiHost+"/events/"+this.id},parse:function(e){return e.event||{}}})}),define("models/member",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:function(){return i.apiHost+"/members/"+this.id},parse:function(e){return e.member||{}},validation:{last_name:{required:!0,maxLength:40},first_name:{required:!0,maxLength:30},steam_id:{required:!1,pattern:"number"}}})}),define("models/user",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Model.extend({url:i.apiHost+"/user",parse:function(e){return e.user||{}}})}),define("collections/assignments",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.current=t.current||!1},url:function(){var e=i.apiHost+(this.member_id?"/members/"+this.member_id:"/user/")+"/assignments";return this.current&&(e+="?current=true"),e},parse:function(e){return e.assignments||[]}})}),define("collections/awardings",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/awardings"},parse:function(e){return e.awardings||[]}})}),define("collections/discharges",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.unit_filter=t.unit_filter||!1},url:function(){var e=i.apiHost;return this.member_id?e+="/members/"+this.member_id+"/discharges":this.unit_filter&&(e+="/units/"+this.unit_filter+"/discharges"),e},parse:function(e){return e.discharges||[]}})}),define("collections/enlistments",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({settings:{limit:15},initialize:function(e,t){t=t||{},this.skip=0},url:function(){var n={},a=i.apiHost+"/enlistments";return this.skip&&(n.skip=this.skip),this.status&&(n.status=this.status),t.isEmpty(n)||(a+="?"+e.param(n)),a},setFilter:function(e,t){return this[e]=t,this},nextPage:function(){return this.skip+=this.settings.limit,this},parse:function(e){return this.more=parseInt(e.count,10)>parseInt(e.skip,10)+e.enlistments.length,e.enlistments||[]}})}),define("models/event_attendee",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({initialize:function(){var e=this.get("attended"),t=this.get("absent")||null,n=this.get("excused"),i=this.get("event");this.set("attended",null!==e?parseInt(e,10):e),this.set("excused",null!==n?parseInt(n,10):n),null!==t&&this.set("absent",parseInt(t,10)),i&&(i.mandatory=parseInt(i.mandatory,10),this.set("event",i))}})}),define("collections/event_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,a){return n.Collection.extend({model:a,initialize:function(e,t){t=t||{},this.id=t.id||null},url:function(){return i.apiHost+"/events/"+this.id+"/excuse"}})}),define("collections/events",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.from=t.from||!1,this.to=t.to||!1},url:function(){var t=i.apiHost+"/events";return this.from&&this.to&&(t+="?"+e.param({from:this.from,to:this.to})),t},parse:function(e){return e.events||[]}})}),define("collections/member_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,a){return n.Collection.extend({settings:{limit:15},model:a,initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.skip=0},url:function(){var e=i.apiHost+"/members/"+this.member_id+"/attendance";return this.skip&&(e+="?skip="+this.skip),e},nextPage:function(){return this.skip+=this.settings.limit,this},parse:function(e){return this.more=parseInt(e.count,10)>parseInt(e.skip,10)+e.attendance.length,e.attendance||[]}})}),define("collections/member_awols",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.days=t.days||!1
},url:function(){return i.apiHost+"/members/"+this.member_id+"/awols"+(this.days?"?days="+this.days:"")},parse:function(e){return e.awols||[]}})}),define("collections/member_enlistments",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/enlistments"},parse:function(e){return e.enlistments||[]}})}),define("collections/permissions",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1,this.unit_id=t.unit_id||!1},url:function(){var e=i.apiHost+"/user/permissions";return this.member_id?e+="/members/"+this.member_id:this.unit_id&&(e+="/units/"+this.unit_id),e},parse:function(e){return e.permissions||[]}})}),define("collections/positions",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.order=t.order||null},url:function(){return i.apiHost+"/positions"+(this.order?"?order="+this.order:"")},parse:function(e){return e.positions||[]}})}),define("models/promotion",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({initialize:function(){var e=this.get("old_rank"),t=this.get("new_rank");e.order=parseInt(e.order,10),t.order=parseInt(t.order,10),this.set("old_rank",e),this.set("new_rank",t)}})}),define("collections/promotions",["jquery","underscore","backbone","config","models/promotion"],function(e,t,n,i,a){return n.Collection.extend({model:a,initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/promotions"},parse:function(e){return e.promotions||[]}})}),define("collections/qualifications",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.member_id=t.member_id||!1},url:function(){return i.apiHost+"/members/"+this.member_id+"/qualifications"},parse:function(e){return e.qualifications||[]}})}),define("collections/unit_attendance",["jquery","underscore","backbone","config","models/event_attendee"],function(e,t,n,i,a){return n.Collection.extend({settings:{limit:15},model:a,initialize:function(e,t){t=t||{},this.filter=t.filter||!1,this.skip=0},url:function(){var e=i.apiHost+"/units/"+this.filter+"/attendance";return this.skip&&(e+="?skip="+this.skip),e},nextPage:function(){return this.skip+=this.settings.limit,this},parse:function(e){return this.more=parseInt(e.count,10)>parseInt(e.skip,10)+e.attendance.length,e.attendance||[]}})}),define("collections/unit_awols",["jquery","underscore","backbone","config"],function(e,t,n,i){return n.Collection.extend({initialize:function(e,t){t=t||{},this.filter=t.filter||!1,this.days=t.days||!1},url:function(){return i.apiHost+"/units/"+this.filter+"/awols"+(this.days?"?days="+this.days:"")},parse:function(e){return e.awols||[]},setFilter:function(e,t){return this[e]=t,this}})}),define("collections/units",["jquery","underscore","backbone","config"],function(e,t,n,i){var a=n.Model.extend({initialize:function(){this.get("children")&&this.set("children",new r(this.get("children")))}}),r=n.Collection.extend({model:a,initialize:function(e,t){t=t||{},this.filter=t.filter||!1,this.children=t.children||!1,this.members=t.members||!1,this.inactive=t.inactive||!1,this.order=t.order||!1,this.historic=t.historic||!1,this.flat=t.flat||!1},url:function(){var n={},a=i.apiHost+"/units";return this.filter&&(a+="/"+encodeURIComponent(this.filter)),this.children&&(n.children=this.children),this.members&&(n.members=this.members),this.inactive&&(n.inactive=this.inactive),this.order&&(n.order=this.order),this.historic&&(n.historic=this.historic),t.isEmpty(n)||(a+="?"+e.param(n)),a},parse:function(e){return this.flat?this.flatten(e.units||[e.unit]):e.units||[e.unit]||[]},flatten:function(e){var n=[],i=this;return t.each(e,function(e){n.push(e),e.children&&(e.children.length&&(n=n.concat(i.flatten(e.children))),delete e.children)}),n}});return r}),define("hbs",["handlebars"],function(e){var t={},n=".hbs";return{load:function(i,a,r,s){var o=s.hbs&&s.hbs.templateExtension?s.hbs.templateExtension:n;if(s.isBuild){var l=nodeRequire("fs"),c=s.dirBaseUrl+"/"+i+o;t[i]=l.readFileSync(c).toString(),r()}else a(["text!"+i+o],function(t){r(e.compile(t))})},write:function(n,i,a){var r=e.precompile(t[i]);a("define('hbs!"+i+"', ['handlebars'], function(Handlebars){ \nreturn Handlebars.template("+r.toString()+");\n});\n")}}}),define("hbs!templates/aar",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return" Mandatory "}function s(){return" Non-Mandatory "}function o(e){var t;return p((t=e&&e.server,t=null==t||t===!1?t:t.name,typeof t===d?t.apply(e):t))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c,h,u="",d="function",p=this.escapeExpression,m=n.helperMissing,f=this;return u+='<div class="row header">\n        <h1>'+p((l=t&&t.unit,l=null==l||l===!1?l:l.key,typeof l===d?l.apply(t):l))+" ",(c=n.type)?l=c.call(t,{hash:{},data:a}):(c=t&&t.type,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+"</h1>\n        <h2>"+p((c=n.dateFormat||t&&t.dateFormat,h={hash:{format:"ll HH:mm"},data:a},c?c.call(t,t&&t.datetime,h):m.call(t,"dateFormat",t&&t.datetime,h)))+" <small>",l=n["if"].call(t,t&&t.mandatory,{hash:{},inverse:f.program(3,s,a),fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+="</small></h2>\n        <h3>",l=n["if"].call(t,(l=t&&t.server,null==l||l===!1?l:l.name),{hash:{},inverse:f.noop,fn:f.program(5,o,a),data:a}),(l||0===l)&&(u+=l),u+='</h3>\n</div>\n<form>\n    <div class="row">\n        <div class="col-sm-4" id="attendance"></div>\n        <div class="col-sm-8">\n            <div class="form-group">\n                <label for="report">After Action Report</label>\n                <textarea name="report" id="report" class="form-control" rows="15">',(c=n.report)?l=c.call(t,{hash:{},data:a}):(c=t&&t.report,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+'</textarea>\n            </div>\n            <button type="submit" class="btn btn-primary btn-lg">Submit</button>\n        </div>\n    </div>\n</form>'})}),define("views/aar",["jquery","underscore","backbone","hbs!templates/aar","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,title:"Post AAR",regions:{attendanceRegion:"#attendance"},events:{"submit form":"onSubmitForm"},initialize:function(){t.bindAll(this,"onSubmitForm")},onRender:function(){this.model.get("unit").key&&(this.title="Post AAR - "+this.model.get("unit").key+" "+this.model.get("type"))},onSubmitForm:function(t){t.preventDefault();var i=this.model.get("id"),a={report:t.currentTarget.report.value,attended:e('[name="attendance"]:checked',t.currentTarget).map(function(){return e(this).val()}).get(),absent:e('[name="attendance"]:not(:checked)',t.currentTarget).map(function(){return e(this).val()}).get()};this.model.save(a,{method:"POST",patch:!0,data:a,processData:!0,url:this.model.url()+"/aar",success:function(){n.history.navigate("events/"+i,{trigger:!0})}})}})}),define("hbs!templates/assignment_edit",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.units,{hash:{},inverse:y.noop,fn:y.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function s(e,t){var i,a="";return a+='\n            <optgroup label="'+b((i=e&&e.abbr,typeof i===v?i.apply(e):i))+'">\n                ',i=n.each.call(e,e&&e.members,{hash:{},inverse:y.noop,fn:y.program(3,o,t),data:t}),(i||0===i)&&(a+=i),a+="\n            </optgroup>\n            "}function o(e){var t,n="";return n+='\n                <option value="'+b((t=e&&e.id,typeof t===v?t.apply(e):t))+'">'+b((t=e&&e.short_name,typeof t===v?t.apply(e):t))+"</option>\n                "}function l(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.units,{hash:{},inverse:y.noop,fn:y.program(6,c,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function c(e){var t,n="";return n+='\n            <option value="'+b((t=e&&e.id,typeof t===v?t.apply(e):t))+'">'+b((t=e&&e.abbr,typeof t===v?t.apply(e):t))+"</option>\n            "}function h(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.positions,{hash:{},inverse:y.noop,fn:y.program(9,u,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function u(e){var t,n="";return n+='\n            <option value="'+b((t=e&&e.id,typeof t===v?t.apply(e):t))+'">'+b((t=e&&e.name,typeof t===v?t.apply(e):t))+"</option>\n            "}function d(){return'\n            <option value="">Select...</option>\n            <option value="0">Default</option>\n            <option value="1">Elevated</option>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var p,m,f,g="",v="function",b=this.escapeExpression,y=this,_=n.helperMissing;return g+='<form role="form">\n\n    <div class="form-group">\n        <label for="recruiter_member_id">Member</label>\n        <select class="form-control selectpicker" name="member_id" id="member_id" data-live-search="true">\n            ',m=n.select||t&&t.select,f={hash:{},inverse:y.noop,fn:y.program(1,r,a),data:a},p=m?m.call(t,(p=t&&t.member,null==p||p===!1?p:p.id),f):_.call(t,"select",(p=t&&t.member,null==p||p===!1?p:p.id),f),(p||0===p)&&(g+=p),g+='\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label for="unit_id">Unit</label>\n        <select class="form-control selectpicker" name="unit_id" id="unit_id" data-live-search="true">\n            ',m=n.select||t&&t.select,f={hash:{},inverse:y.noop,fn:y.program(5,l,a),data:a},p=m?m.call(t,(p=t&&t.unit,null==p||p===!1?p:p.id),f):_.call(t,"select",(p=t&&t.unit,null==p||p===!1?p:p.id),f),(p||0===p)&&(g+=p),g+='\n        </select>\n    </div>\n    <div class="form-group">\n        <label for="position_id">Position</label>\n        <select class="form-control selectpicker" name="position_id" id="position_id" data-live-search="true">\n            ',m=n.select||t&&t.select,f={hash:{},inverse:y.noop,fn:y.program(8,h,a),data:a},p=m?m.call(t,(p=t&&t.position,null==p||p===!1?p:p.id),f):_.call(t,"select",(p=t&&t.position,null==p||p===!1?p:p.id),f),(p||0===p)&&(g+=p),g+='\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label for="start_date">Start Date</label>\n        <input type="text" class="form-control" id="start_date" name="start_date" value="',(m=n.start_date)?p=m.call(t,{hash:{},data:a}):(m=t&&t.start_date,p=typeof m===v?m.call(t,{hash:{},data:a}):m),g+=b(p)+'" data-provide="datepicker" data-date-format="yyyy-mm-dd">\n    </div>\n    \n    <div class="form-group">\n        <label for="end_date">End Date</label>\n        <input type="text" class="form-control" id="end_date" name="end_date" value="',(m=n.end_date)?p=m.call(t,{hash:{},data:a}):(m=t&&t.end_date,p=typeof m===v?m.call(t,{hash:{},data:a}):m),g+=b(p)+'" data-provide="datepicker" data-date-format="yyyy-mm-dd">\n    </div>\n    <div class="form-group">\n        <label for="access_level">Access Level</label>\n        <select class="form-control" name="access_level" id="access_level">\n            ',m=n.select||t&&t.select,f={hash:{},inverse:y.noop,fn:y.program(11,d,a),data:a},p=m?m.call(t,t&&t.access_level,f):_.call(t,"select",t&&t.access_level,f),(p||0===p)&&(g+=p),g+='\n        </select>\n    </div>\n    \n    <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>\n</form>'})}),define("views/assignment_edit",["jquery","underscore","backbone","hbs!templates/assignment_edit","marionette","bootstrap-datepicker"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,title:"Modify Assignment",events:{"submit form":"onSubmitForm"},initialize:function(e){e=e||{},this.units=e.units||{},this.positions=e.positions||{},t.bindAll(this,"onSubmitForm"),n.Validation.bind(this)},serializeData:function(){return e.extend({units:this.units.length?this.units.toJSON():{},positions:this.positions.length?this.positions.toJSON():{}},this.model.toJSON())},onRender:function(){this.$(".selectpicker").selectpicker()},onSubmitForm:function(t){t.preventDefault();var i=e(t.currentTarget).serializeObject(),a=this.model.get("member").id;this.model.save(i,{method:"POST",patch:!0,data:i,processData:!0,success:function(){n.history.navigate("members/"+a+"/servicerecord",{trigger:!0})}})}})}),define("hbs!templates/calendar",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{},'<div id="calendar"></div>'})}),define("views/calendar",["jquery","underscore","backbone","util","hbs!templates/calendar","marionette","fullcalendar"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:a,className:"calendar",title:"Calendar",settings:{calendar:{header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay",ignoreTimezone:!1},buttonText:{prev:'<i class="glyphicon glyphicon-arrow-left"></i>',next:'<i class="glyphicon glyphicon-arrow-right"></i>'},eventClick:function(e){n.history.navigate("#events/"+e.id,{trigger:!0})},eventDataTransform:function(e){return{id:e.id,title:window.moment(e.datetime).format("HH:mm")+" "+(e.unit.key?e.unit.key:e.type),start:e.datetime,backgroundColor:e.user_expected?"#5cb85c":"#3a87ad"}},loading:function(e){i.loading(e)}}},initialize:function(){t.bindAll(this,"getEvents"),this.settings.calendar.events=this.getEvents},onShow:function(){this.$("#calendar").fullCalendar(this.settings.calendar)},getEvents:function(t,n,i){var a=this;this.collection.from=Math.round(t.getTime()/1e3),this.collection.to=Math.round(n.getTime()/1e3),e.when(this.collection.fetch()).done(function(){var e=a.collection.toJSON().map(function(e){return e.user_expected=a.isExpected(e),e});i(e)})},isExpected:function(e){var t=!1;return this.options.userAssignments.length&&e.unit.id&&this.options.userAssignments.any(function(n){return n.get("unit").id===e.unit.id||n.get("unit").path.indexOf("/"+e.unit.id+"/")>-1?(t=!0,!0):void 0}),t}})}),define("hbs!templates/discharge",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var r,s,o,l="",c="function",h=this.escapeExpression,u=n.helperMissing;return l+="<h1>",(s=n.type)?r=s.call(t,{hash:{},data:a}):(s=t&&t.type,r=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=h(r)+' Discharge</h1>\n<h2><a href="#members/'+h((r=t&&t.member,r=null==r||r===!1?r:r.id,typeof r===c?r.apply(t):r))+'">'+h((r=t&&t.member,r=null==r||r===!1?r:r.short_name,typeof r===c?r.apply(t):r))+"</a></h2>\n<h3>"+h((s=n.dateFormat||t&&t.dateFormat,o={hash:{format:"ll"},data:a},s?s.call(t,t&&t.date,o):u.call(t,"dateFormat",t&&t.date,o)))+"</h3>\n",(s=n.reason)?r=s.call(t,{hash:{},data:a}):(s=t&&t.reason,r=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=h(r)})}),define("views/discharge",["jquery","underscore","backbone","hbs!templates/discharge","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,title:"Discharge",onRender:function(){this.model.get("member").short_name&&(this.title="Discharge - "+this.model.get("member").short_name)}})}),define("hbs!templates/enlistment_edit",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            <option value="Under 13">Under 13</option>\n            ',i=n.each.call(e,e&&e.ages,{hash:{},inverse:v.noop,fn:v.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function s(e){var t="";return t+='\n            <option value="'+g(typeof e===f?e.apply(e):e)+'">'+g(typeof e===f?e.apply(e):e)+"</option>\n            "}function o(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.countries,{hash:{},inverse:v.noop,fn:v.program(5,l,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function l(e){var t,n="";return n+='\n            <option value="'+g((t=e&&e.id,typeof t===f?t.apply(e):t))+'">'+g((t=e&&e.name,typeof t===f?t.apply(e):t))+"</option>\n            "}function c(){return'\n            <option value="">Select...</option>\n            <option value="EST">7pm EST (Midnight GMT)</option>\n            <option value="GMT">2pm EST (7pm GMT)</option>\n            <option value="Either">Either</option>\n            <option value="Neither">Neither</option>\n            '}function h(){return'\n            <option value="">Select...</option>\n            <option value="DH">Darkest Hour</option>\n            <option value="RS">Rising Storm</option>\n            <option value="Arma 3">Arma 3</option>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var u,d,p,m="",f="function",g=this.escapeExpression,v=this,b=n.helperMissing;return m+='<form role="form">\n    \n    <div class="form-group">\n        <label for="last_name">Last Name</label>\n        <input type="text" class="form-control" name="last_name" id="last_name" value="',(d=n.last_name)?u=d.call(t,{hash:{},data:a}):(d=t&&t.last_name,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block">Please use your real name or a realistic sounding name.</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="first_name">First Name</label>\n        <input type="text" class="form-control" name="first_name" id="first_name" value="',(d=n.first_name)?u=d.call(t,{hash:{},data:a}):(d=t&&t.first_name,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="middle_name">Middle Initial</label>\n        <input type="text" class="form-control" name="middle_name" id="middle_name" value="',(d=n.middle_name)?u=d.call(t,{hash:{},data:a}):(d=t&&t.middle_name,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="age">Age</label>\n        <select class="form-control" name="age" id="age">\n            ',d=n.select||t&&t.select,p={hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a},u=d?d.call(t,t&&t.age,p):b.call(t,"select",t&&t.age,p),(u||0===u)&&(m+=u),m+='\n        </select>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="country_id">Country</label>\n        <select class="form-control" name="country_id" id="country_id">\n            ',d=n.select||t&&t.select,p={hash:{},inverse:v.noop,fn:v.program(4,o,a),data:a},u=d?d.call(t,t&&t.country_id,p):b.call(t,"select",t&&t.country_id,p),(u||0===u)&&(m+=u),m+='\n        </select>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="timezone">Preferred Time</label>\n        <select class="form-control" name="timezone" id="timezone">\n            ',d=n.select||t&&t.select,p={hash:{},inverse:v.noop,fn:v.program(7,c,a),data:a},u=d?d.call(t,t&&t.timezone,p):b.call(t,"select",t&&t.timezone,p),(u||0===u)&&(m+=u),m+='\n        </select>\n        <p class="help-block">Which time do you prefer for practicing? (Give or take an hour)</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="game">Game</label>\n        <select class="form-control" name="game" id="game">\n            ',d=n.select||t&&t.select,p={hash:{},inverse:v.noop,fn:v.program(9,h,a),data:a},u=d?d.call(t,t&&t.game,p):b.call(t,"select",t&&t.game,p),(u||0===u)&&(m+=u),m+='\n        </select>\n        <p class="help-block">Which game are you enlisting in?</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="ingame_name">In-Game Name</label>\n        <input type="text" class="form-control" name="ingame_name" id="ingame_name" value="',(d=n.ingame_name)?u=d.call(t,{hash:{},data:a}):(d=t&&t.ingame_name,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block">What name do you play with?</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="steam_id">Steam ID</label>\n        <input type="text" class="form-control" name="steam_id" id="steam_id" value="',(d=n.steam_id)?u=d.call(t,{hash:{},data:a}):(d=t&&t.steam_id,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block">Your Steam Identification Number. <a href="http://29th.org/roid" target="_blank">Click here for help</a>.</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="email">Working Email</label>\n        <input type="text" class="form-control" name="email" id="email" value="',(d=n.email)?u=d.call(t,{hash:{},data:a}):(d=t&&t.email,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block">Will be kept private. We will need this to email you information about Basic Training.</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="experience">Realism Experience</label>\n        <textarea class="form-control" rows="3" name="experience" id="experience">',(d=n.experience)?u=d.call(t,{hash:{},data:a}):(d=t&&t.experience,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'</textarea>\n        <p class="help-block">If you have ever been in a realism unit(s), what one(s), what rank(s), and name(s) have you used? Why are you no longer with the unit(s)? Please provide all this information to ensure acceptance. If you\'ve never been in a realism unit, simply write "None".</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="recruiter">Who Recruited You?</label>\n        <input type="text" class="form-control" name="recruiter" id="recruiter" value="',(d=n.recruiter)?u=d.call(t,{hash:{},data:a}):(d=t&&t.recruiter,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <p class="help-block">What was the name of the 29th member who asked you to enlist? If you were not recruited by someone, how did you find out about the 29th Infantry Division?</p>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <div class="form-group">\n        <label for="comments">Other Comments</label>\n        <textarea class="form-control" rows="3" name="comments" id="comments">',(d=n.comments)?u=d.call(t,{hash:{},data:a}):(d=t&&t.comments,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'</textarea>\n        <p class="help-block error-msg"></p>\n    </div>\n    \n    <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>\n</form>'})}),define("text",["module"],function(e){var t,n,i,a,r,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,d=c&&(location.port||void 0),p={},m=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(i){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,a=!1,r=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!s||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(a="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,a){var r,s,o,l=t.xdRegExp.exec(e);return l?(r=l[2],s=l[3],s=s.split(":"),o=s[1],s=s[0],!(r&&r!==n||s&&s.toLowerCase()!==i.toLowerCase()||(o||s)&&o!==a)):!0},finishLoad:function(e,n,i,a){i=n?t.strip(i):i,m.isBuild&&(p[e]=i),a(i)},load:function(e,n,i,a){if(a&&a.isBuild&&!a.inlineText)return void i();m.isBuild=a&&a.isBuild;var r=t.parseName(e),s=r.moduleName+(r.ext?"."+r.ext:""),o=n.toUrl(s),l=m.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void i():void(!c||l(o,h,u,d)?t.get(o,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)}))},write:function(e,n,i){if(p.hasOwnProperty(n)){var a=t.jsEscape(p[n]);i.asModule(e+"!"+n,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,n,i,a,r){var s=t.parseName(n),o=s.ext?"."+s.ext:"",l=s.moduleName+o,c=i.toUrl(s.moduleName+o)+".js";t.load(l,i,function(){var n=function(e){return a(c,e)};n.asModule=function(e,t){return a.asModule(e,c,t)},t.write(e,l,n,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var a=n.readFileSync(e,"utf8");0===a.indexOf("")&&(a=a.substring(1)),t(a)}catch(r){i&&i(r)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,n,i,a){var r,s=t.createXhr();if(s.open("GET",e,!0),a)for(r in a)a.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),a[r]);m.onXhr&&m.onXhr(s,e),s.onreadystatechange=function(){var t,a;4===s.readyState&&(t=s.status||0,t>399&&600>t?(a=new Error(e+" HTTP status: "+t),a.xhr=s,i&&i(a)):n(s.responseText),m.onXhrComplete&&m.onXhrComplete(s,e))},s.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,a="utf-8",r=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),a)),l="";try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,o,l={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(o,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),s.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(c){throw new Error((o&&o.path||"")+": "+c)}}),t}),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,n,i){!i.isBuild||i.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){i.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:"application/json"}):n(null)},normalize:function(e){return-1===e.indexOf(CACHE_BUST_FLAG)?e:cacheBust(e)},write:function(e,t,n){if(t in buildMap){var i=buildMap[t];n('define("'+e+"!"+t+'", function(){ return '+i+";});\n")}}}}),define("json!countries.json",function(){return[{id:1,name:"ANDORRA"},{id:2,name:"UNITED ARAB EMIRATES"},{id:3,name:"AFGHANISTAN"},{id:4,name:"ANTIGUA AND BARBUDA"},{id:5,name:"ANGUILLA"},{id:6,name:"ALBANIA"},{id:7,name:"ARMENIA"},{id:8,name:"NETHERLANDS ANTILLES"},{id:9,name:"ANGOLA"},{id:10,name:"ANTARCTICA"},{id:11,name:"ARGENTINA"},{id:12,name:"AMERICAN SAMOA"},{id:13,name:"AUSTRIA"},{id:14,name:"AUSTRALIA"},{id:15,name:"ARUBA"},{id:16,name:"AZERBAIJAN"},{id:17,name:"BOSNIA AND HERZEGOVINA"},{id:18,name:"BARBADOS"},{id:19,name:"BANGLADESH"},{id:20,name:"BELGIUM"},{id:21,name:"BURKINA FASO"},{id:22,name:"BULGARIA"},{id:23,name:"BAHRAIN"},{id:24,name:"BURUNDI"},{id:25,name:"BENIN"},{id:26,name:"BERMUDA"},{id:27,name:"BRUNEI DARUSSALAM"},{id:28,name:"BOLIVIA"},{id:29,name:"BRAZIL"},{id:30,name:"BAHAMAS"},{id:31,name:"BHUTAN"},{id:32,name:"BOUVET ISLAND"},{id:33,name:"BOTSWANA"},{id:34,name:"BELARUS"},{id:35,name:"BELIZE"},{id:36,name:"CANADA"},{id:37,name:"COCOS (KEELING) ISLANDS"},{id:38,name:"CONGO, THE DEMOCRATIC REPUBLIC OF THE"},{id:39,name:"CENTRAL AFRICAN REPUBLIC"},{id:40,name:"CONGO"},{id:41,name:"SWITZERLAND"},{id:42,name:"COTE D'IVOIRE"},{id:43,name:"COOK ISLANDS"},{id:44,name:"CHILE"},{id:45,name:"CAMEROON"},{id:46,name:"CHINA"},{id:47,name:"COLOMBIA"},{id:48,name:"COSTA RICA"},{id:49,name:"SERBIA AND MONTENEGRO"},{id:50,name:"CUBA"},{id:51,name:"CAPE VERDE"},{id:52,name:"CHRISTMAS ISLAND"},{id:53,name:"CYPRUS"},{id:54,name:"CZECH REPUBLIC"},{id:55,name:"GERMANY"},{id:56,name:"DJIBOUTI"},{id:57,name:"DENMARK"},{id:58,name:"DOMINICA"},{id:59,name:"DOMINICAN REPUBLIC"},{id:60,name:"ALGERIA"},{id:61,name:"ECUADOR"},{id:62,name:"ESTONIA"},{id:63,name:"EGYPT"},{id:64,name:"WESTERN SAHARA"},{id:65,name:"ERITREA"},{id:66,name:"SPAIN"},{id:67,name:"ETHIOPIA"},{id:68,name:"FINLAND"},{id:69,name:"FIJI"},{id:70,name:"FALKLAND ISLANDS (MALVINAS)"},{id:71,name:"MICRONESIA, FEDERATED STATES OF"},{id:72,name:"FAROE ISLANDS"},{id:73,name:"FRANCE"},{id:74,name:"GABON"},{id:75,name:"UNITED KINGDOM"},{id:76,name:"GRENADA"},{id:77,name:"GEORGIA"},{id:78,name:"FRENCH GUIANA"},{id:79,name:"GHANA"},{id:80,name:"GIBRALTAR"},{id:81,name:"GREENLAND"},{id:82,name:"GAMBIA"},{id:83,name:"GUINEA"},{id:84,name:"GUADELOUPE"},{id:85,name:"EQUATORIAL GUINEA"},{id:86,name:"GREECE"},{id:87,name:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"},{id:88,name:"GUATEMALA"},{id:89,name:"GUAM"},{id:90,name:"GUINEA-BISSAU"},{id:91,name:"GUYANA"},{id:92,name:"HONG KONG"},{id:93,name:"HEARD ISLAND AND MCDONALD ISLANDS"},{id:94,name:"HONDURAS"},{id:95,name:"CROATIA"},{id:96,name:"HAITI"},{id:97,name:"HUNGARY"},{id:98,name:"INDONESIA"},{id:99,name:"IRELAND"},{id:100,name:"ISRAEL"},{id:101,name:"INDIA"},{id:102,name:"BRITISH INDIAN OCEAN TERRITORY"},{id:103,name:"IRAQ"},{id:104,name:"IRAN, ISLAMIC REPUBLIC OF"},{id:105,name:"ICELAND"},{id:106,name:"ITALY"},{id:107,name:"JAMAICA"},{id:108,name:"JORDAN"},{id:109,name:"JAPAN"},{id:110,name:"KENYA"},{id:111,name:"KYRGYZSTAN"},{id:112,name:"CAMBODIA"},{id:113,name:"KIRIBATI"},{id:114,name:"COMOROS"},{id:115,name:"SAINT KITTS AND NEVIS"},{id:116,name:"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF"},{id:117,name:"KOREA, REPUBLIC OF"},{id:118,name:"KUWAIT"},{id:119,name:"CAYMAN ISLANDS"},{id:120,name:"KAZAKHSTAN"},{id:121,name:"LAO PEOPLE'S DEMOCRATIC REPUBLIC"},{id:122,name:"LEBANON"},{id:123,name:"SAINT LUCIA"},{id:124,name:"LIECHTENSTEIN"},{id:125,name:"SRI LANKA"},{id:126,name:"LIBERIA"},{id:127,name:"LESOTHO"},{id:128,name:"LITHUANIA"},{id:129,name:"LUXEMBOURG"},{id:130,name:"LATVIA"},{id:131,name:"LIBYAN ARAB JAMAHIRIYA"},{id:132,name:"MOROCCO"},{id:133,name:"MONACO"},{id:134,name:"MOLDOVA, REPUBLIC OF"},{id:135,name:"MADAGASCAR"},{id:136,name:"MARSHALL ISLANDS"},{id:137,name:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"},{id:138,name:"MALI"},{id:139,name:"MYANMAR"},{id:140,name:"MONGOLIA"},{id:141,name:"MACAO"},{id:142,name:"NORTHERN MARIANA ISLANDS"},{id:143,name:"MARTINIQUE"},{id:144,name:"MAURITANIA"},{id:145,name:"MONTSERRAT"},{id:146,name:"MALTA"},{id:147,name:"MAURITIUS"},{id:148,name:"MALDIVES"},{id:149,name:"MALAWI"},{id:150,name:"MEXICO"},{id:151,name:"MALAYSIA"},{id:152,name:"MOZAMBIQUE"},{id:153,name:"NAMIBIA"},{id:154,name:"NEW CALEDONIA"},{id:155,name:"NIGER"},{id:156,name:"NORFOLK ISLAND"},{id:157,name:"NIGERIA"},{id:158,name:"NICARAGUA"},{id:159,name:"NETHERLANDS"},{id:160,name:"NORWAY"},{id:161,name:"NEPAL"},{id:162,name:"NAURU"},{id:163,name:"NIUE"},{id:164,name:"NEW ZEALAND"},{id:165,name:"OMAN"},{id:166,name:"PANAMA"},{id:167,name:"PERU"},{id:168,name:"FRENCH POLYNESIA"},{id:169,name:"PAPUA NEW GUINEA"},{id:170,name:"PHILIPPINES"},{id:171,name:"PAKISTAN"},{id:172,name:"POLAND"},{id:173,name:"SAINT PIERRE AND MIQUELON"},{id:174,name:"PITCAIRN"},{id:175,name:"PUERTO RICO"},{id:176,name:"PALESTINIAN TERRITORY, OCCUPIED"},{id:177,name:"PORTUGAL"},{id:178,name:"PALAU"},{id:179,name:"PARAGUAY"},{id:180,name:"QATAR"},{id:181,name:"REUNION"},{id:182,name:"ROMANIA"},{id:183,name:"RUSSIAN FEDERATION"},{id:184,name:"RWANDA"},{id:185,name:"SAUDI ARABIA"},{id:186,name:"SOLOMON ISLANDS"},{id:187,name:"SEYCHELLES"},{id:188,name:"SUDAN"},{id:189,name:"SWEDEN"},{id:190,name:"SINGAPORE"},{id:191,name:"SAINT HELENA"},{id:192,name:"SLOVENIA"},{id:193,name:"SVALBARD AND JAN MAYEN"},{id:194,name:"SLOVAKIA"},{id:195,name:"SIERRA LEONE"},{id:196,name:"SAN MARINO"},{id:197,name:"SENEGAL"},{id:198,name:"SOMALIA"},{id:199,name:"SURINAME"},{id:200,name:"SAO TOME AND PRINCIPE"},{id:201,name:"EL SALVADOR"},{id:202,name:"SYRIAN ARAB REPUBLIC"},{id:203,name:"SWAZILAND"},{id:204,name:"TURKS AND CAICOS ISLANDS"},{id:205,name:"CHAD"},{id:206,name:"FRENCH SOUTHERN TERRITORIES"},{id:207,name:"TOGO"},{id:208,name:"THAILAND"},{id:209,name:"TAJIKISTAN"},{id:210,name:"TOKELAU"},{id:211,name:"TIMOR-LESTE"},{id:212,name:"TURKMENISTAN"},{id:213,name:"TUNISIA"},{id:214,name:"TONGA"},{id:215,name:"TURKEY"},{id:216,name:"TRINIDAD AND TOBAGO"},{id:217,name:"TUVALU"},{id:218,name:"TAIWAN, PROVINCE OF CHINA"},{id:219,name:"TANZANIA, UNITED REPUBLIC OF"},{id:220,name:"UKRAINE"},{id:221,name:"UGANDA"},{id:222,name:"UNITED STATES MINOR OUTLYING ISLANDS"},{id:223,name:"UNITED STATES"},{id:224,name:"URUGUAY"},{id:225,name:"UZBEKISTAN"},{id:226,name:"HOLY SEE (VATICAN CITY STATE)"},{id:227,name:"SAINT VINCENT AND THE GRENADINES"},{id:228,name:"VENEZUELA"},{id:229,name:"VIRGIN ISLANDS, BRITISH"},{id:230,name:"VIRGIN ISLANDS, U.S."},{id:231,name:"VIET NAM"},{id:232,name:"VANUATU"},{id:233,name:"WALLIS AND FUTUNA"},{id:234,name:"SAMOA"},{id:235,name:"YEMEN"},{id:236,name:"MAYOTTE"},{id:237,name:"SOUTH AFRICA"},{id:238,name:"ZAMBIA"},{id:239,name:"ZIMBABWE"}]
}),function(e){"object"==typeof exports?module.exports=e(require("backbone"),require("underscore")):"function"==typeof define&&define.amd&&define("backbone.validation",["backbone","underscore"],e)}(function(e,t){return e.Validation=function(e){var t={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,n){return l[t.labelFormatter](e,n)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}},i=function(t,n,a){return n=n||{},a=a||"",e.each(t,function(e,r){t.hasOwnProperty(r)&&(!e||"object"!=typeof e||e instanceof Date||e instanceof RegExp?n[a+r]=e:i(e,n,a+r+"."))}),n},a=function(){var a=function(t){return e.reduce(e.keys(t.validation||{}),function(e,t){return e[t]=void 0,e},{})},s=function(t,n){var i=t.validation?t.validation[n]||{}:{};return(e.isFunction(i)||e.isString(i))&&(i={fn:i}),e.isArray(i)||(i=[i]),e.reduce(i,function(t,n){return e.each(e.without(e.keys(n),"msg"),function(e){t.push({fn:c[e],val:n[e],msg:n.msg})}),t},[])},o=function(t,i,a,r){return e.reduce(s(t,i),function(s,o){var l=e.extend({},n,c),h=o.fn.call(l,a,i,o.val,t,r);return h===!1||s===!1?!1:h&&!s?o.msg||h:s},"")},l=function(t,n){var a,r={},s=!0,l=e.clone(n),c=i(n);return e.each(c,function(e,n){a=o(t,n,e,l),a&&(r[n]=a,s=!1)}),{invalidAttrs:r,isValid:s}},h=function(t,n){return{preValidate:function(t,n){return o(this,t,n,e.extend({},this.attributes))},isValid:function(t){var n=i(this.attributes);return e.isString(t)?!o(this,t,n[t],e.extend({},this.attributes)):e.isArray(t)?e.reduce(t,function(t,i){return t&&!o(this,i,n[i],e.extend({},this.attributes))},!0,this):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(r,s){var o=this,c=!r,h=e.extend({},n,s),u=a(o),d=e.extend({},u,o.attributes,r),p=i(r||d),m=l(o,d);return o._isValid=m.isValid,e.each(u,function(e,n){var i=m.invalidAttrs.hasOwnProperty(n);i||h.valid(t,n,h.selector)}),e.each(u,function(e,n){var i=m.invalidAttrs.hasOwnProperty(n),a=p.hasOwnProperty(n);i&&(a||c)&&h.invalid(t,n,m.invalidAttrs[n],h.selector)}),e.defer(function(){o.trigger("validated",o._isValid,o,m.invalidAttrs),o.trigger("validated:"+(o._isValid?"valid":"invalid"),o,m.invalidAttrs)}),!h.forceUpdate&&e.intersection(e.keys(m.invalidAttrs),e.keys(p)).length>0?m.invalidAttrs:void 0}}},u=function(t,n,i){e.extend(n,h(t,i))},d=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){u(this.view,e,this.options)},m=function(e){d(e)};return{version:"0.7.1",configure:function(n){e.extend(t,n)},bind:function(n,i){var a=n.model,s=n.collection;if(i=e.extend({},t,r,i),"undefined"==typeof a&&"undefined"==typeof s)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";a?u(n,a,i):s&&(s.each(function(e){u(n,e,i)}),s.bind("add",p,{view:n,options:i}),s.bind("remove",m))},unbind:function(e){var t=e.model,n=e.collection;t&&d(e.model),n&&(n.each(function(e){d(e)}),n.unbind("add",p),n.unbind("remove",m))},mixin:h(null,t)}}(),r=a.callbacks={valid:function(e,t,n){e.$("["+n+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,n,i){e.$("["+i+'~="'+t+'"]').addClass("invalid").attr("data-error",n)}},s=a.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},o=a.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",pattern:"{0} must be a valid {1}"},l=a.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace("_"," ")},label:function(e,t){return t.labels&&t.labels[e]||l.sentenceCase(e,t)}},c=a.validators=function(){var t=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,n=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(n,"")},n=function(t){return e.isNumber(t)||e.isString(t)&&t.match(s.number)},i=function(n){return!(e.isNull(n)||e.isUndefined(n)||e.isString(n)&&""===t(n))};return{fn:function(t,n,i,a,r){return e.isString(i)&&(i=a[i]),i.call(a,t,n,r)},required:function(t,n,a,r,s){var l=e.isFunction(a)?a.call(r,t,n,s):a;return l||i(t)?l&&!i(t)?this.format(o.required,this.formatLabel(n,r)):void 0:!1},acceptance:function(t,n,i,a){return"true"===t||e.isBoolean(t)&&t!==!1?void 0:this.format(o.acceptance,this.formatLabel(n,a))},min:function(e,t,i,a){return!n(e)||i>e?this.format(o.min,this.formatLabel(t,a),i):void 0},max:function(e,t,i,a){return!n(e)||e>i?this.format(o.max,this.formatLabel(t,a),i):void 0},range:function(e,t,i,a){return!n(e)||e<i[0]||e>i[1]?this.format(o.range,this.formatLabel(t,a),i[0],i[1]):void 0},length:function(e,n,a,r){return i(e)&&t(e).length===a?void 0:this.format(o.length,this.formatLabel(n,r),a)},minLength:function(e,n,a,r){return!i(e)||t(e).length<a?this.format(o.minLength,this.formatLabel(n,r),a):void 0},maxLength:function(e,n,a,r){return!i(e)||t(e).length>a?this.format(o.maxLength,this.formatLabel(n,r),a):void 0},rangeLength:function(e,n,a,r){return!i(e)||t(e).length<a[0]||t(e).length>a[1]?this.format(o.rangeLength,this.formatLabel(n,r),a[0],a[1]):void 0},oneOf:function(t,n,i,a){return e.include(i,t)?void 0:this.format(o.oneOf,this.formatLabel(n,a),i.join(", "))},equalTo:function(e,t,n,i,a){return e!==a[n]?this.format(o.equalTo,this.formatLabel(t,i),this.formatLabel(n,i)):void 0},pattern:function(e,t,n,a){return i(e)&&e.toString().match(s[n]||n)?void 0:this.format(o.pattern,this.formatLabel(t,a),n)}}}();return a}(t),e.Validation}),define("views/enlistment_edit",["jquery","underscore","backbone","hbs!templates/enlistment_edit","json!countries.json","marionette","backbone.validation"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:i,title:"Modify Enlistment",events:{"submit form":"onSubmitForm"},initialize:function(e){e=e||{},this.tps=e.tps||{},t.bindAll(this,"onSubmitForm"),this.ages=[];var i;for(i=13;99>=i;i++)this.ages.push(i);n.Validation.bind(this)},serializeData:function(){return e.extend({ages:this.ages,countries:a,tps:this.tps.length?this.tps.at(0).get("children").toJSON():{}},this.model.toJSON())},onSubmitForm:function(t){t.preventDefault();var i=e(t.currentTarget).serializeObject();this.model.save(i,{method:"POST",patch:!0,data:i,processData:!0,success:function(e){n.history.navigate("enlistments/"+e.get("id"),{trigger:!0})}})}})}),define("hbs!templates/enlistment_process",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.tps,{hash:{},inverse:b.noop,fn:b.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function s(e){var t,n="";return n+='\n            <option value="'+v((t=e&&e.id,typeof t===g?t.apply(e):t))+'">'+v((t=e&&e.abbr,typeof t===g?t.apply(e):t))+"</option>\n            "}function o(){return'\n            <option value="">Select...</option>\n            <option value="Pending">Pending</option>\n            <option value="Accepted">Accepted</option>\n            <option value="Denied">Denied</option>\n            <option value="Withdrawn">Withdrawn</option>\n            '}function l(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.units,{hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function c(e,t){var i,a="";return a+='\n            <optgroup label="'+v((i=e&&e.abbr,typeof i===g?i.apply(e):i))+'">\n                ',i=n.each.call(e,e&&e.members,{hash:{},inverse:b.noop,fn:b.program(8,h,t),data:t}),(i||0===i)&&(a+=i),a+="\n            </optgroup>\n            "}function h(e){var t,n="";return n+='\n                <option value="'+v((t=e&&e.id,typeof t===g?t.apply(e):t))+'">'+v((t=e&&e.short_name,typeof t===g?t.apply(e):t))+"</option>\n                "}function u(e,t){var i,a,r="";return r+="Applicant wrote: ",(a=n.recruiter)?i=a.call(e,{hash:{},data:t}):(a=e&&e.recruiter,i=typeof a===g?a.call(e,{hash:{},data:t}):a),r+=v(i)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var d,p,m,f="",g="function",v=this.escapeExpression,b=this,y=n.helperMissing;return f+='<form role="form">\n    <div class="form-group">\n        <label for="unit_id">Unit</label>\n        <select class="form-control selectpicker" name="unit_id" id="unit_id" data-live-search="true">\n            ',p=n.select||t&&t.select,m={hash:{},inverse:b.noop,fn:b.program(1,r,a),data:a},d=p?p.call(t,t&&t.unit_id,m):y.call(t,"select",t&&t.unit_id,m),(d||0===d)&&(f+=d),f+='\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label for="status">Status</label>\n        <select class="form-control" name="status" id="status">\n            ',p=n.select||t&&t.select,m={hash:{},inverse:b.noop,fn:b.program(4,o,a),data:a},d=p?p.call(t,t&&t.status,m):y.call(t,"select",t&&t.status,m),(d||0===d)&&(f+=d),f+='\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label for="recruiter_member_id">Recruiter</label>\n        <!--<input type="text" class="form-control" name="recruiter_member_id" id="recruiter_member_id" value="',(p=n.recruiter_member_id)?d=p.call(t,{hash:{},data:a}):(p=t&&t.recruiter_member_id,d=typeof p===g?p.call(t,{hash:{},data:a}):p),f+=v(d)+'">-->\n        <select class="form-control selectpicker" name="recruiter_member_id" id="recruiter_member_id" data-live-search="true">\n            ',p=n.select||t&&t.select,m={hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a},d=p?p.call(t,t&&t.recruiter_member_id,m):y.call(t,"select",t&&t.recruiter_member_id,m),(d||0===d)&&(f+=d),f+='\n        </select>\n        <p class="help-block">',d=n["if"].call(t,t&&t.recruiter,{hash:{},inverse:b.noop,fn:b.program(10,u,a),data:a}),(d||0===d)&&(f+=d),f+='</p>\n    </div>\n    \n    <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>\n</form>'})}),define("views/enlistment_process",["jquery","underscore","backbone","hbs!templates/enlistment_process","marionette","bootstrap-select"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,title:"Process Enlistment",events:{"submit form":"onSubmitForm"},initialize:function(e){e=e||{},this.tps=e.tps||{},this.units=e.units||{},t.bindAll(this,"onSubmitForm"),n.Validation.bind(this)},serializeData:function(){return e.extend({tps:this.tps.length?this.tps.at(0).get("children").toJSON():{},units:this.units.length?this.units.toJSON():{}},this.model.toJSON())},onRender:function(){this.$(".selectpicker").selectpicker()},onSubmitForm:function(t){t.preventDefault();var i=e(t.currentTarget).serializeObject(),a=this.model.get("id");this.model.save(i,{method:"POST",patch:!0,data:i,processData:!0,url:this.model.url()+"/process",success:function(){n.history.navigate("enlistments/"+a,{trigger:!0})}})}})}),define("hbs!templates/enlistments",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{},'<div class="btn-group" id="filter-status">\n    <button type="button" class="btn btn-default active" data-status="">All</button>\n    <button type="button" class="btn btn-default" data-status="pending">Pending</button>\n    <button type="button" class="btn btn-default" data-status="accepted">Accepted</button>\n    <button type="button" class="btn btn-default" data-status="denied">Denied</button>\n    <button type="button" class="btn btn-default" data-status="withdrawn">Withdrawn</button>\n</div>\n\n<table class="table">\n    <thead>\n        <tr>\n            <th>Date</th>\n            <th>Status</th>\n            <th>Unit</th>\n            <th>Name</th>\n            <th>Liaison</th>\n        </tr>\n    </thead>\n    <tbody id="rows"></tbody>\n</table>\n\n<button class="btn btn-large btn-block more" type="button" data-loading-text="Loading" data-error-text="Error">More</button>'})}),define("hbs!templates/enlistments_item",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e){var t,n="";return n+=", "+p((t=e&&e.first_name,typeof t===d?t.apply(e):t))}function s(e,t){var i,a,r="";return r+=" "+p((i=n.substring||e&&e.substring,a={hash:{},data:t},i?i.call(e,e&&e.middle_name,0,1,a):m.call(e,"substring",e&&e.middle_name,0,1,a)))+"."}function o(e){var t,n="";return n+='<a href="#members/'+p((t=e&&e.liaison,t=null==t||t===!1?t:t.id,typeof t===d?t.apply(e):t))+'">'+p((t=e&&e.liaison,t=null==t||t===!1?t:t.short_name,typeof t===d?t.apply(e):t))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c,h,u="",d="function",p=this.escapeExpression,m=n.helperMissing,f=this;return u+='<td><a href="#enlistments/'+p((l=t&&t.id,typeof l===d?l.apply(t):l))+'">'+p((c=n.dateFormat||t&&t.dateFormat,h={hash:{format:"ll"},data:a},c?c.call(t,t&&t.date,h):m.call(t,"dateFormat",t&&t.date,h)))+'</a></td>\n<td><span class="label label-'+p((c=n.enlistment_label||t&&t.enlistment_label,h={hash:{},data:a},c?c.call(t,t&&t.status,h):m.call(t,"enlistment_label",t&&t.status,h)))+'">'+p((l=t&&t.status,typeof l===d?l.apply(t):l))+'</span></td>\n<td><a href="#units/'+p((l=t&&t.unit,l=null==l||l===!1?l:l.key,typeof l===d?l.apply(t):l))+'">'+p((l=t&&t.unit,l=null==l||l===!1?l:l.abbr,typeof l===d?l.apply(t):l))+"</a></td>\n<td>"+p((l=t&&t.last_name,typeof l===d?l.apply(t):l)),l=n["if"].call(t,t&&t.first_name,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),l=n["if"].call(t,t&&t.middle_name,{hash:{},inverse:f.noop,fn:f.program(3,s,a),data:a}),(l||0===l)&&(u+=l),u+="</td>\n<td>",l=n["if"].call(t,(l=t&&t.liaison,null==l||l===!1?l:l.id),{hash:{},inverse:f.noop,fn:f.program(5,o,a),data:a}),(l||0===l)&&(u+=l),u+="</td>"})}),define("views/enlistments",["jquery","underscore","backbone","hbs!templates/enlistments","hbs!templates/enlistments_item","marionette"],function(e,t,n,i,a){var r=n.Marionette.ItemView.extend({template:a,tagName:"tr"});return n.Marionette.CompositeView.extend({template:i,title:"Enlistments",itemView:r,itemViewContainer:"#rows",initialize:function(){t.bindAll(this,"onClickMore","onClickBtnGroup")},events:{"click .more":"onClickMore","click .btn-group .btn":"onClickBtnGroup"},onRender:function(){this.checkMoreButton()},onClickMore:function(t){t.preventDefault();var n=this,i=e(t.currentTarget);i.button("loading"),this.collection.nextPage().fetch({remove:!1,success:function(){i.button("reset"),n.checkMoreButton()},error:function(){i.button("error")}})},checkMoreButton:function(){this.$(".more").toggle(this.collection.more)},onClickBtnGroup:function(t){var n=e(t.currentTarget),i=this,a=n.data("status");e(".btn-group .btn").removeClass("active"),n.addClass("active"),this.collection.setFilter("status",a).fetch({success:function(){i.checkMoreButton()}})}})}),define("hbs!templates/enlistment",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a,r,c,h="";return h+='\n<div class="btn-group pull-right">\n    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n        Admin <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu" role="menu">\n    ',r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},inverse:_.noop,fn:_.program(2,s,t),data:t},i=r?r.call(e,"enlistment_process_any",c):w.call(e,"if_inarray","enlistment_process_any",c),(i||0===i)&&(h+=i),h+="\n    \n    ",r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},inverse:_.noop,fn:_.program(4,o,t),data:t},i=r?r.call(e,"enlistment_edit_any",c):w.call(e,"if_inarray","enlistment_edit_any",c),(i||0===i)&&(h+=i),h+="\n    \n    ",r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},data:t},i=r?r.call(e,"profile_edit_any",c):w.call(e,"if_inarray","profile_edit_any",c),r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.memberPermissions},data:t},a=r?r.call(e,"profile_edit",c):w.call(e,"if_inarray","profile_edit",c),r=n.or||e&&e.or,c={hash:{},inverse:_.noop,fn:_.program(6,l,t),data:t},i=r?r.call(e,a,i,c):w.call(e,"or",a,i,c),(i||0===i)&&(h+=i),h+="\n    </ul>\n</div>\n"}function s(e,t){var i,a,r="";return r+='\n        <li><a href="#enlistments/',(a=n.id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.id,i=typeof a===b?a.call(e,{hash:{},data:t}):a),r+=y(i)+'/process">Process Enlistment</a></li>\n    '}function o(e,t){var i,a,r="";return r+='\n        <li><a href="#enlistments/',(a=n.id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.id,i=typeof a===b?a.call(e,{hash:{},data:t}):a),r+=y(i)+'/edit">Modify Enlistment</a></li>\n    '}function l(e){var t,n="";return n+='\n        <li><a href="#members/'+y((t=e&&e.member,t=null==t||t===!1?t:t.id,typeof t===b?t.apply(e):t))+'/edit">Modify Profile</a></li>\n    '}function c(e,t){var i,a,r="";return r+=y((i=n.substring||e&&e.substring,a={hash:{},data:t},i?i.call(e,e&&e.middle_name,0,1,a):w.call(e,"substring",e&&e.middle_name,0,1,a)))+". "}function h(e){var t,n="";return n+='<a href="#members/'+y((t=e&&e.member,t=null==t||t===!1?t:t.id,typeof t===b?t.apply(e):t))+'">'+y((t=e&&e.member,t=null==t||t===!1?t:t.short_name,typeof t===b?t.apply(e):t))+"</a>"}function u(e){var t,n="";return n+='<a href="#members/'+y((t=e&&e.unit,t=null==t||t===!1?t:t.key,typeof t===b?t.apply(e):t))+'">'+y((t=e&&e.unit,t=null==t||t===!1?t:t.abbr,typeof t===b?t.apply(e):t))+"</a>"}function d(e){var t,n="";return n+='<a href="#members/'+y((t=e&&e.liaison,t=null==t||t===!1?t:t.id,typeof t===b?t.apply(e):t))+'">'+y((t=e&&e.liaison,t=null==t||t===!1?t:t.short_name,typeof t===b?t.apply(e):t))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var p,m,f,g,v="",b="function",y=this.escapeExpression,_=this,w=n.helperMissing;return f=n.length||t&&t.length,g={hash:{},data:a},p=f?f.call(t,t&&t.memberPermissions,g):w.call(t,"length",t&&t.memberPermissions,g),f=n.length||t&&t.length,g={hash:{},data:a},m=f?f.call(t,t&&t.permissions,g):w.call(t,"length",t&&t.permissions,g),f=n.or||t&&t.or,g={hash:{},inverse:_.noop,fn:_.program(1,r,a),data:a},p=f?f.call(t,m,p,g):w.call(t,"or",m,p,g),(p||0===p)&&(v+=p),v+="\n\n<h1>\n    ",(f=n.first_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.first_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+" ",p=n["if"].call(t,t&&t.middle_name,{hash:{},inverse:_.noop,fn:_.program(8,c,a),data:a}),(p||0===p)&&(v+=p),(f=n.last_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.last_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+'\n</h1>\n<span class="label label-'+y((f=n.enlistment_label||t&&t.enlistment_label,g={hash:{},data:a},f?f.call(t,t&&t.status,g):w.call(t,"enlistment_label",t&&t.status,g)))+'">',(f=n.status)?p=f.call(t,{hash:{},data:a}):(f=t&&t.status,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</span> -\n",p=n["if"].call(t,(p=t&&t.member,null==p||p===!1?p:p.id),{hash:{},inverse:_.noop,fn:_.program(10,h,a),data:a}),(p||0===p)&&(v+=p),v+=" -\n",p=n["if"].call(t,(p=t&&t.unit,null==p||p===!1?p:p.id),{hash:{},inverse:_.noop,fn:_.program(12,u,a),data:a}),(p||0===p)&&(v+=p),v+='\n\n<table class="table table-horizontal">\n    <tr>\n        <th>Date</th>\n        <td>'+y((f=n.dateFormat||t&&t.dateFormat,g={hash:{format:"ll"},data:a},f?f.call(t,t&&t.date,g):w.call(t,"dateFormat",t&&t.date,g)))+"</td>\n    </tr>\n    <tr>\n        <th>Liaison</th>\n        <td>",p=n["if"].call(t,(p=t&&t.liaison,null==p||p===!1?p:p.id),{hash:{},inverse:_.noop,fn:_.program(14,d,a),data:a}),(p||0===p)&&(v+=p),v+="</td>\n    </tr>\n    <tr>\n        <th>Last Name</th>\n        <td>",(f=n.last_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.last_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    <tr>\n        <th>First Name</th>\n        <td>",(f=n.first_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.first_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    <tr>\n        <th>Middle Name</th>\n        <td>",(f=n.middle_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.middle_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    <tr>\n        <th>Age</th>\n        <td>",(f=n.age)?p=f.call(t,{hash:{},data:a}):(f=t&&t.age,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    <tr>\n        <th>Country</th>\n        <td>"+y((p=t&&t.country,p=null==p||p===!1?p:p.name,typeof p===b?p.apply(t):p))+"</td>\n    </tr>\n    <tr>\n        <th>Preferred Time</th>\n        <td>",(f=n.timezone)?p=f.call(t,{hash:{},data:a}):(f=t&&t.timezone,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    <tr>\n        <th>Game</th>\n        <td>",(f=n.game)?p=f.call(t,{hash:{},data:a}):(f=t&&t.game,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>In-Game Name</th>\n        <td>",(f=n.ingame_name)?p=f.call(t,{hash:{},data:a}):(f=t&&t.ingame_name,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>Steam ID</th>\n        <td>",(f=n.steam_id)?p=f.call(t,{hash:{},data:a}):(f=t&&t.steam_id,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>Email</th>\n        <td>",(f=n.email)?p=f.call(t,{hash:{},data:a}):(f=t&&t.email,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>Realism Experience</th>\n        <td>",(f=n.experience)?p=f.call(t,{hash:{},data:a}):(f=t&&t.experience,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>Recruiter</th>\n        <td>",(f=n.recruiter)?p=f.call(t,{hash:{},data:a}):(f=t&&t.recruiter,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"</td>\n    </tr>\n    </tr>\n    <tr>\n        <th>Other Comments</th>\n        <td>",(f=n.comments)?p=f.call(t,{hash:{},data:a}):(f=t&&t.comments,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+'</td>\n    </tr>\n</table>\n\n<div id="vanilla-comments">\n    <div class="iframe-loading"><h2><i class="fa fa-spinner fa-spin"></i> Loading comments</h2></div>\n    <iframe src="',(f=n.vanilla_forum_url)?p=f.call(t,{hash:{},data:a}):(f=t&&t.vanilla_forum_url,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"/?p=/discussion/embed/&vanilla_identifier=",(f=n.vanilla_identifier)?p=f.call(t,{hash:{},data:a}):(f=t&&t.vanilla_identifier,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"&vanilla_category_id=",(f=n.vanilla_category_id)?p=f.call(t,{hash:{},data:a}):(f=t&&t.vanilla_category_id,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"&title=",(f=n.vanilla_title)?p=f.call(t,{hash:{},data:a}):(f=t&&t.vanilla_title,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+"&vanilla_url=",(f=n.vanilla_url)?p=f.call(t,{hash:{},data:a}):(f=t&&t.vanilla_url,p=typeof f===b?f.call(t,{hash:{},data:a}):f),v+=y(p)+'"></iframe>\n</div>'})}),define("views/enlistment",["jquery","underscore","backbone","hbs!templates/enlistment","config","require","marionette"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:i,title:"Enlistment",initialize:function(e){e=e||{},this.permissions=e.permissions||{},this.memberPermissions=e.memberPermissions||{}},serializeData:function(){return e.extend({permissions:this.permissions.length?this.permissions.pluck("abbr"):[],memberPermissions:this.memberPermissions.length?this.memberPermissions.pluck("abbr"):[],vanilla_forum_url:a.forumUrl,vanilla_identifier:"enlistment-"+this.model.get("id"),vanilla_url:a.baseUrl+"/%23"+n.history.fragment,vanilla_category_id:a.vanillaCategoryEnlistments,vanilla_title:encodeURIComponent("Enlistment - "+this.model.get("member").short_name)},this.model.toJSON())},onRender:function(){this.model.get("member").short_name&&(this.title="Enlistment - "+this.model.get("member").short_name),this.$("#vanilla-comments iframe").on("load",t.bind(this.onLoadIframe,this))},onLoadIframe:function(){e(".iframe-loading").hide()}})}),define("hbs!templates/event",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return" Mandatory "}function s(){return" Non-Mandatory "}function o(e){var t;return x((t=e&&e.server,t=null==t||t===!1?t:t.name,typeof t===w?t.apply(e):t))}function l(e,t){var i,a="";return a+='\n            <div id="loa-buttons" class="',i=n["if"].call(e,(i=e&&e.user_rsvp,null==i||i===!1?i:i.excused),{hash:{},inverse:A.program(10,h,t),fn:A.program(8,c,t),data:t}),(i||0===i)&&(a+=i),a+='">\n                <button type="button" class="btn btn-default pull-right" id="loa-cancel"><span class="glyphicon glyphicon-minus-sign"></span> Cancel LOA</button>\n                <button type="button" class="btn btn-default pull-right" id="loa-post"><span class="glyphicon glyphicon-plus-sign"></span> Post LOA</button>\n            </div>\n            \n        '}function c(){return"loa-cancel"}function h(){return"loa-post"}function u(e,t){var i,a,r="";return r+='\n            <a href="#events/',(a=n.id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.id,i=typeof a===w?a.call(e,{hash:{},data:t}):a),r+=x(i)+'/aar" class="btn btn-default pull-right"><span class="glyphicon glyphicon-list"></span> Post AAR</a>\n        '}function d(e,t){var i,a,r,s="";return s+="You ",a=n.past||e&&e.past,r={hash:{},data:t},i=a?a.call(e,e&&e.datetime,r):k.call(e,"past",e&&e.datetime,r),i=n["if"].call(e,i,{hash:{},inverse:A.program(17,m,t),fn:A.program(15,p,t),data:t}),(i||0===i)&&(s+=i),s+=" expected to attend"}function p(){return"were"}function m(){return"are"}function f(e,t){var i,a,r="";return r+='\n<div class="well">'+x((i=n.bbcode||e&&e.bbcode,a={hash:{},data:t},i?i.call(e,e&&e.report,a):k.call(e,"bbcode",e&&e.report,a)))+"</div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var g,v,b,y,_="",w="function",x=this.escapeExpression,A=this,k=n.helperMissing;return _+='<div class="row header">\n    <div class="col-sm-8">\n        <h1>',(b=n.type)?g=b.call(t,{hash:{},data:a}):(b=t&&t.type,g=typeof b===w?b.call(t,{hash:{},data:a}):b),_+=x(g)+' <small><a href="#units/'+x((g=t&&t.unit,g=null==g||g===!1?g:g.abbr,typeof g===w?g.apply(t):g))+'">'+x((g=t&&t.unit,g=null==g||g===!1?g:g.name,typeof g===w?g.apply(t):g))+"</a></small></h1>\n        <h2>"+x((b=n.dateFormat||t&&t.dateFormat,y={hash:{format:"ll HH:mm"},data:a},b?b.call(t,t&&t.datetime,y):k.call(t,"dateFormat",t&&t.datetime,y)))+" <small>",g=n["if"].call(t,t&&t.mandatory,{hash:{},inverse:A.program(3,s,a),fn:A.program(1,r,a),data:a}),(g||0===g)&&(_+=g),_+="</small></h2>\n        <h3>",g=n["if"].call(t,(g=t&&t.server,null==g||g===!1?g:g.name),{hash:{},inverse:A.noop,fn:A.program(5,o,a),data:a}),(g||0===g)&&(_+=g),_+='</h3>\n    </div>\n    <div class="col-sm-4">\n        ',b=n.within_24_hours||t&&t.within_24_hours,y={hash:{},data:a},g=b?b.call(t,t&&t.datetime,y):k.call(t,"within_24_hours",t&&t.datetime,y),b=n.and||t&&t.and,y={hash:{},inverse:A.noop,fn:A.program(7,l,a),data:a},g=b?b.call(t,t&&t.user_expected,g,y):k.call(t,"and",t&&t.user_expected,g,y),(g||0===g)&&(_+=g),_+="\n        ",b=n.if_inarray||t&&t.if_inarray,y={hash:{compare:t&&t.permissions},data:a},g=b?b.call(t,"event_aar_any",y):k.call(t,"if_inarray","event_aar_any",y),b=n.if_inarray||t&&t.if_inarray,y={hash:{compare:t&&t.unitPermissions},data:a},v=b?b.call(t,"event_aar",y):k.call(t,"if_inarray","event_aar",y),b=n.or||t&&t.or,y={hash:{},inverse:A.noop,fn:A.program(12,u,a),data:a},g=b?b.call(t,v,g,y):k.call(t,"or",v,g,y),(g||0===g)&&(_+=g),_+="\n    </div>\n</div>\n",g=n["if"].call(t,t&&t.user_expected,{hash:{},inverse:A.noop,fn:A.program(14,d,a),data:a}),(g||0===g)&&(_+=g),_+="\n\n",g=n["if"].call(t,t&&t.report,{hash:{},inverse:A.noop,fn:A.program(19,f,a),data:a}),(g||0===g)&&(_+=g),_+='\n\n<ul id="attendance"></ul>'})}),define("hbs!templates/event_attendee",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+="\r\n        ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:h.program(4,o,t),fn:h.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\r\n    "}function s(){return'\r\n            <span class="label label-warning">Excused</span>\r\n        '}function o(){return'\r\n            <span class="label label-danger">AWOL</span>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c="",h=this,u="function",d=this.escapeExpression;return c+='<li>\r\n    <a href="#members/'+d((l=t&&t.member,l=null==l||l===!1?l:l.id,typeof l===u?l.apply(t):l))+'">'+d((l=t&&t.member,l=null==l||l===!1?l:l.short_name,typeof l===u?l.apply(t):l))+"</a>\r\n    ",l=n.unless.call(t,t&&t.attended,{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a}),(l||0===l)&&(c+=l),c+="\r\n</li>"})}),define("views/event_attendee",["jquery","underscore","backbone","hbs!templates/event_attendee","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,modelEvents:{change:"render"}})}),define("views/event",["jquery","underscore","backbone","config","hbs!templates/event","views/event_attendee","marionette"],function(e,t,n,i,a,r){return n.Marionette.CompositeView.extend({template:a,itemView:r,itemViewContainer:"ul",title:"Event",events:{"click #loa-cancel, #loa-post":"onClickLOA"},initialize:function(e){e=e||{},t.bindAll(this,"onClickLOA"),this.user=e.user||{},this.permissions=e.permissions||{},this.permissions.on("reset",this.render,this),this.unitPermissions=e.unitPermissions||{},this.unitPermissions.on("reset",this.render,this)
},onBeforeRender:function(){var e=(this.options.user.get("id"),this.getRSVP(this.options.user.get("id")));this.model.set("user_expected",this.isExpected(this.model)),e&&this.model.set("user_rsvp",e.toJSON())},onRender:function(){this.model.get("unit").key&&(this.title=this.model.get("unit").key+" "+this.model.get("type"))},serializeData:function(){return t.extend({permissions:this.permissions.length?this.permissions.pluck("abbr"):[],unitPermissions:this.unitPermissions.length?this.unitPermissions.pluck("abbr"):[]},this.model.toJSON())},isExpected:function(e){var t=!1;return this.options.userAssignments.length&&e.get("unit").id&&this.options.userAssignments.any(function(n){return n.get("path_array")||n.set("path_array",n.get("unit").path.split("/").map(function(e){return e?parseInt(e,10):void 0})),n.get("unit").id===e.get("unit").id||n.get("path_array").indexOf(parseInt(e.get("unit").id,10))>-1?(t=!0,!0):void 0}),t},getRSVP:function(e){return this.collection.find(function(t){return t.get("member").id===e})},onClickLOA:function(t){t.preventDefault();var n=t.currentTarget,a="loa-post"===n.id?1:0,r=this.getRSVP(this.user.get("id"));r&&null!==r.get("attended")?r.save({excused:a},{method:a?"POST":"DELETE",wait:!0,success:function(){e(n).parent().removeClass(a?"loa-post":"loa-cancel").addClass(a?"loa-cancel":"loa-post")}}):a?this.collection.create({attended:null,excused:1,member:{id:this.user.get("id"),short_name:this.user.get("short_name")}},{wait:!0,success:function(){e(n).parent().removeClass("loa-post").addClass("loa-cancel")}}):(r.id=this.user.get("id"),r.destroy({url:i.apiHost+"/events/"+this.collection.id+"/excuse",wait:!0,success:function(){e(n).parent().removeClass("loa-cancel").addClass("loa-post")}}))}})}),define("hbs!templates/flash",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var r,s,o="",l="function",c=this.escapeExpression;return o+='<div class="alert alert-dismissable ',(s=n.type)?r=s.call(t,{hash:{},data:a}):(s=t&&t.type,r=typeof s===l?s.call(t,{hash:{},data:a}):s),o+=c(r)+'">\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n    ',(s=n.msg)?r=s.call(t,{hash:{},data:a}):(s=t&&t.msg,r=typeof s===l?s.call(t,{hash:{},data:a}):s),o+=c(r)+"\n</div>"})}),define("views/flash",["jquery","underscore","backbone","hbs!templates/flash","marionette"],function(e,t,n,i){var a={success:"alert-success",info:"alert-info",warning:"alert-warning",error:"alert-danger"};return n.Marionette.ItemView.extend({template:i,initialize:function(e){e=e||{},this.msg=e.msg||"Unknown",this.type=a[e.type]||a.info},serializeData:function(){return{msg:this.msg,type:this.type}}})}),define("hbs!templates/member_admin",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a,r,c,h="";return h+='\n<div class="btn-group pull-right">\n    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n        Admin <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu" role="menu">\n        ',r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},data:t},i=r?r.call(e,"profile_edit_any",c):f.call(e,"if_inarray","profile_edit_any",c),r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.memberPermissions},data:t},a=r?r.call(e,"profile_edit",c):f.call(e,"if_inarray","profile_edit",c),r=n.or||e&&e.or,c={hash:{},inverse:g.noop,fn:g.program(2,s,t),data:t},i=r?r.call(e,a,i,c):f.call(e,"or",a,i,c),(i||0===i)&&(h+=i),h+="\n        ",r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},data:t},i=r?r.call(e,"assignment_add_any",c):f.call(e,"if_inarray","assignment_add_any",c),r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.memberPermissions},data:t},a=r?r.call(e,"assignment_add",c):f.call(e,"if_inarray","assignment_add",c),r=n.or||e&&e.or,c={hash:{},inverse:g.noop,fn:g.program(4,o,t),data:t},i=r?r.call(e,a,i,c):f.call(e,"or",a,i,c),(i||0===i)&&(h+=i),h+="\n        ",r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.permissions},data:t},i=r?r.call(e,"discharge_add_any",c):f.call(e,"if_inarray","discharge_add_any",c),r=n.if_inarray||e&&e.if_inarray,c={hash:{compare:e&&e.memberPermissions},data:t},a=r?r.call(e,"discharge_add",c):f.call(e,"if_inarray","discharge_add",c),r=n.or||e&&e.or,c={hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t},i=r?r.call(e,a,i,c):f.call(e,"or",a,i,c),(i||0===i)&&(h+=i),h+="\n    </ul>\n</div>\n"}function s(e,t){var i,a,r="";return r+='\n            <li><a href="#members/',(a=n.member_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.member_id,i=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=m(i)+'/edit">Modify Profile</a></li>\n        '}function o(e,t){var i,a,r="";return r+='\n            <li><a href="#members/',(a=n.member_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.member_id,i=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=m(i)+'/assign">Assign</a></li>\n        '}function l(e,t){var i,a,r="";return r+='\n            <li class="divider"></li>\n            <li><a href="#members/',(a=n.member_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.member_id,i=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=m(i)+'/discharge">Discharge</a></li>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var c,h,u,d,p="function",m=this.escapeExpression,f=n.helperMissing,g=this;return u=n.length||t&&t.length,d={hash:{},data:a},c=u?u.call(t,t&&t.memberPermissions,d):f.call(t,"length",t&&t.memberPermissions,d),u=n.length||t&&t.length,d={hash:{},data:a},h=u?u.call(t,t&&t.permissions,d):f.call(t,"length",t&&t.permissions,d),u=n.or||t&&t.or,d={hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a},c=u?u.call(t,h,c,d):f.call(t,"or",h,c,d),c||0===c?c:""})}),define("views/member_admin",["jquery","underscore","backbone","hbs!templates/member_admin","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,initialize:function(e){e=e||{},this.permissions=e.permissions||{},this.permissions.on("reset",this.render,this),this.memberPermissions=e.memberPermissions||{},this.memberPermissions.on("reset",this.render,this)},serializeData:function(){return{member_id:this.memberPermissions.member_id,permissions:this.permissions.length?this.permissions.pluck("abbr"):[],memberPermissions:this.memberPermissions.length?this.memberPermissions.pluck("abbr"):[]}}})}),define("hbs!templates/member_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{},'<table class="table">\n    <thead>\n        <tr>\n            <th>Date</th>\n            <th colspan="2">Unit</th>\n            <th>Type</th>\n            <th>Status</th>\n        </tr>\n    </thead>\n    <tbody id="rows"></tbody>\n</table>\n\n<button class="btn btn-large btn-block more" type="button" data-loading-text="Loading" data-error-text="Error">More</button>'})}),define("hbs!templates/member_attendance_item",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return'<span class="label label-info">Mandatory</span>'}function s(){return'<span class="label label-default">Non-mandatory</span>'}function o(){return"\n    Attended\n"}function l(e,t){var i,a="";return a+="\n    ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:f.program(10,h,t),fn:f.program(8,c,t),data:t}),(i||0===i)&&(a+=i),a+="\n"}function c(){return"\n        Excused\n    "}function h(){return"\n        AWOL\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var u,d,p,m="",f=this,g="function",v=this.escapeExpression,b=n.helperMissing;return m+='<td><a href="#events/'+v((u=t&&t.event,u=null==u||u===!1?u:u.id,typeof u===g?u.apply(t):u))+'">'+v((d=n.dateFormat||t&&t.dateFormat,p={hash:{format:"ll HH:mm"},data:a},d?d.call(t,(u=t&&t.event,null==u||u===!1?u:u.datetime),p):b.call(t,"dateFormat",(u=t&&t.event,null==u||u===!1?u:u.datetime),p)))+'</a></td>\n<td><a href="#units/'+v((u=t&&t.unit,u=null==u||u===!1?u:u.key,typeof u===g?u.apply(t):u))+'">'+v((d=n.str_replace||t&&t.str_replace,p={hash:{},data:a},d?d.call(t,(u=t&&t.unit,null==u||u===!1?u:u.abbr),"HQ","",p):b.call(t,"str_replace",(u=t&&t.unit,null==u||u===!1?u:u.abbr),"HQ","",p)))+'</a></td>\n<td class="text-center">\n    ',u=n["if"].call(t,(u=t&&t.event,null==u||u===!1?u:u.mandatory),{hash:{},inverse:f.program(3,s,a),fn:f.program(1,r,a),data:a}),(u||0===u)&&(m+=u),m+="\n</td>\n<td>\n    "+v((u=t&&t.event,u=null==u||u===!1?u:u.type,typeof u===g?u.apply(t):u))+"\n</td>\n<td>\n",u=n["if"].call(t,t&&t.attended,{hash:{},inverse:f.program(7,l,a),fn:f.program(5,o,a),data:a}),(u||0===u)&&(m+=u),m+="\n</td>"})}),define("views/member_attendance",["jquery","underscore","backbone","hbs!templates/member_attendance","hbs!templates/member_attendance_item","marionette"],function(e,t,n,i,a){var r=n.Marionette.ItemView.extend({template:a,tagName:"tr"});return n.Marionette.CompositeView.extend({template:i,itemView:r,itemViewContainer:"#rows",_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},this)},initialize:function(){t.bindAll(this,"onClickMore")},events:{"click .more":"onClickMore"},onRender:function(){this.checkMoreButton()},onClickMore:function(t){t.preventDefault();var n=this,i=e(t.currentTarget);i.button("loading"),this.collection.nextPage().fetch({remove:!1,success:function(){i.button("reset"),n.checkMoreButton()},error:function(){i.button("error")}})},checkMoreButton:function(){this.$(".more").toggle(this.collection.more)}})}),define("hbs!templates/member_discharge",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var r,s,o="",l="function",c=this.escapeExpression;return o+="Are you sure you want to discharge ",(s=n.short_name)?r=s.call(t,{hash:{},data:a}):(s=t&&t.short_name,r=typeof s===l?s.call(t,{hash:{},data:a}):s),o+=c(r)+'?\n<br><br>\n<button id="discharge" type="button" class="btn btn-danger btn-lg">Discharge ',(s=n.short_name)?r=s.call(t,{hash:{},data:a}):(s=t&&t.short_name,r=typeof s===l?s.call(t,{hash:{},data:a}):s),o+=c(r)+"</button>"})}),define("views/member_discharge",["jquery","underscore","backbone","hbs!templates/member_discharge","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,events:{"click #discharge":"executeDischarge"},executeDischarge:function(t){t.preventDefault();var i=this.model.get("id");e.ajax({method:"POST",url:this.model.url()+"/discharge",success:function(){n.history.navigate("members/"+i,{trigger:!0})}})}})}),define("hbs!templates/member_edit",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+='\n            <option value="">Select...</option>\n            ',i=n.each.call(e,e&&e.countries,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\n            "}function s(e){var t,n="";return n+='\n            <option value="'+d((t=e&&e.id,typeof t===u?t.apply(e):t))+'">'+d((t=e&&e.name,typeof t===u?t.apply(e):t))+"</option>\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l,c,h="",u="function",d=this.escapeExpression,p=this,m=n.helperMissing;return h+='<form role="form">\n    <div class="form-group">\n        <label for="first_name">First Name</label>\n        <input type="text" class="form-control" id="first_name" name="first_name" value="',(l=n.first_name)?o=l.call(t,{hash:{},data:a}):(l=t&&t.first_name,o=typeof l===u?l.call(t,{hash:{},data:a}):l),h+=d(o)+'">\n    </div>\n    \n    <div class="form-group">\n        <label for="middle_name">Middle Name</label>\n        <input type="text" class="form-control" id="middle_name" name="middle_name" value="',(l=n.middle_name)?o=l.call(t,{hash:{},data:a}):(l=t&&t.middle_name,o=typeof l===u?l.call(t,{hash:{},data:a}):l),h+=d(o)+'">\n    </div>\n    \n    <div class="form-group">\n        <label for="last_name">Last Name</label>\n        <input type="text" class="form-control" id="last_name" name="last_name" value="',(l=n.last_name)?o=l.call(t,{hash:{},data:a}):(l=t&&t.last_name,o=typeof l===u?l.call(t,{hash:{},data:a}):l),h+=d(o)+'">\n    </div>\n    \n    <div class="form-group">\n        <label for="country_id">Country</label>\n        <select class="form-control" name="country_id" id="country_id">\n            ',l=n.select||t&&t.select,c={hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a},o=l?l.call(t,(o=t&&t.country,null==o||o===!1?o:o.id),c):m.call(t,"select",(o=t&&t.country,null==o||o===!1?o:o.id),c),(o||0===o)&&(h+=o),h+='\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label for="steam_id">Steam ID</label>\n        <input type="text" class="form-control" id="steam_id" name="steam_id" value="',(l=n.steam_id)?o=l.call(t,{hash:{},data:a}):(l=t&&t.steam_id,o=typeof l===u?l.call(t,{hash:{},data:a}):l),h+=d(o)+'">\n    </div>\n    \n    <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>\n</form>'})}),define("views/member_edit",["jquery","underscore","backbone","hbs!templates/member_edit","json!countries.json","marionette"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:i,initialize:function(){t.bindAll(this,"onSubmitForm"),n.Validation.bind(this)},events:{"submit form":"onSubmitForm"},serializeData:function(){return e.extend({countries:a},this.model.toJSON())},onSubmitForm:function(t){t.preventDefault();var i=e(t.currentTarget).serializeObject(),a=this.model.get("id");this.model.save(i,{method:"POST",patch:!0,data:i,processData:!0,success:function(){n.history.navigate("members/"+a,{trigger:!0})}})}})}),define("hbs!templates/member_profile",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return"es"}function s(e,t){var i,a,r,s="";return s+='<img src="images/countries/'+d((a=n.toLowerCase||e&&e.toLowerCase,r={hash:{},data:t},a?a.call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),r):u.call(e,"toLowerCase",(i=e&&e.country,null==i||i===!1?i:i.abbr),r)))+'.png" title="'+d((i=e&&e.country,i=null==i||i===!1?i:i.name,typeof i===p?i.apply(e):i))+'">'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l,c,h="",u=n.helperMissing,d=this.escapeExpression,p="function",m=this;return h+='<table class="table">\n    <tr>\n        <th>Active Class',l=n.if_gt||t&&t.if_gt,c={hash:{compare:1},inverse:m.noop,fn:m.program(1,r,a),data:a},o=l?l.call(t,(o=t&&t.classes,null==o||o===!1?o:o.length),c):u.call(t,"if_gt",(o=t&&t.classes,null==o||o===!1?o:o.length),c),(o||0===o)&&(h+=o),h+="</th>\n        <td>"+d((l=n.join||t&&t.join,c={hash:{delimiter:", "},data:a},l?l.call(t,t&&t.classes,c):u.call(t,"join",t&&t.classes,c)))+"</td>\n    </tr>\n    <tr>\n        <th>Country</th>\n        <td>\n            ",o=n["if"].call(t,(o=t&&t.country,null==o||o===!1?o:o.abbr),{hash:{},inverse:m.noop,fn:m.program(3,s,a),data:a}),(o||0===o)&&(h+=o),h+=" "+d((o=t&&t.country,o=null==o||o===!1?o:o.name,typeof o===p?o.apply(t):o))+"\n        </td>\n    </tr>\n    <tr>\n        <th>Steam ID</th>\n        <td>",(l=n.steam_id)?o=l.call(t,{hash:{},data:a}):(l=t&&t.steam_id,o=typeof l===p?l.call(t,{hash:{},data:a}):l),h+=d(o)+"</td>\n    </tr>\n</table>"})}),define("views/member_profile",["jquery","underscore","backbone","hbs!templates/member_profile","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i})}),define("hbs!templates/member",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e){var t,n="";return n+='<div class="col-sm-1"><img src="images/ranks/60x60/'+f((t=e&&e.rank,t=null==t||t===!1?t:t.filename,typeof t===m?t.apply(e):t))+'.png" title="'+f((t=e&&e.rank,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+'"></div>'}function s(){return"9"}function o(){return"10"}function l(e){var t,n="";return n+="\n                <li>"+f((t=e&&e.position,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+', <a href="#units/'+f((t=e&&e.unit,t=null==t||t===!1?t:t.key,typeof t===m?t.apply(e):t))+'">'+f((t=e&&e.unit,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+"</a></li>\n            "}function c(){return' class="active"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var h,u,d,p="",m="function",f=this.escapeExpression,g=this,v=n.helperMissing;return p+='<div class="row header">\n    ',h=n["if"].call(t,(h=t&&t.rank,null==h||h===!1?h:h.filename),{hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a}),(h||0===h)&&(p+=h),p+='\n    <div class="col-sm-',h=n["if"].call(t,(h=t&&t.rank,null==h||h===!1?h:h.filename),{hash:{},inverse:g.program(5,o,a),fn:g.program(3,s,a),data:a}),(h||0===h)&&(p+=h),p+='">\n        <div class="title">'+f((h=t&&t.rank,h=null==h||h===!1?h:h.name,typeof h===m?h.apply(t):h))+" ",(u=n.full_name)?h=u.call(t,{hash:{},data:a}):(u=t&&t.full_name,h=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=f(h)+'</div>\n        <ul class="assignments">\n            ',h=n.each.call(t,t&&t.assignments,{hash:{},inverse:g.noop,fn:g.program(7,l,a),data:a}),(h||0===h)&&(p+=h),p+='\n        </ul>\n    </div>\n    <div class="col-sm-2" id="admin"></div>\n</div>\n<div class="row">\n    <div class="col-sm-12">\n        <ul class="nav nav-tabs">\n            <li',u=n.if_eq||t&&t.if_eq,d={hash:{compare:"profile"},inverse:g.noop,fn:g.program(9,c,a),data:a},h=u?u.call(t,t&&t.highlight,d):v.call(t,"if_eq",t&&t.highlight,d),(h||0===h)&&(p+=h),p+=' data-highlight="profile"><a href="#members/',(u=n.id)?h=u.call(t,{hash:{},data:a}):(u=t&&t.id,h=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=f(h)+'">Profile</a></li>\n            <li',u=n.if_eq||t&&t.if_eq,d={hash:{compare:"servicerecord"},inverse:g.noop,fn:g.program(9,c,a),data:a},h=u?u.call(t,t&&t.highlight,d):v.call(t,"if_eq",t&&t.highlight,d),(h||0===h)&&(p+=h),p+=' data-highlight="servicerecord"><a href="#members/',(u=n.id)?h=u.call(t,{hash:{},data:a}):(u=t&&t.id,h=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=f(h)+'/servicerecord">Service Record</a></li>\n            <li',u=n.if_eq||t&&t.if_eq,d={hash:{compare:"attendance"},inverse:g.noop,fn:g.program(9,c,a),data:a},h=u?u.call(t,t&&t.highlight,d):v.call(t,"if_eq",t&&t.highlight,d),(h||0===h)&&(p+=h),p+=' data-highlight="attendance"><a href="#members/',(u=n.id)?h=u.call(t,{hash:{},data:a}):(u=t&&t.id,h=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=f(h)+'/attendance">Attendance</a></li>\n            <li',u=n.if_eq||t&&t.if_eq,d={hash:{compare:"qualifications"},inverse:g.noop,fn:g.program(9,c,a),data:a},h=u?u.call(t,t&&t.highlight,d):v.call(t,"if_eq",t&&t.highlight,d),(h||0===h)&&(p+=h),p+=' data-highlight="qualifications"><a href="#members/',(u=n.id)?h=u.call(t,{hash:{},data:a}):(u=t&&t.id,h=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=f(h)+'/qualifications">Qualifications</a></li>\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="col-sm-12" id="page"></div>\n</div>'})}),define("views/member",["jquery","underscore","backbone","hbs!templates/member","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,className:"member",initialize:function(e){e=e||{},this.assignments=e.assignments||{}},modelEvents:{},regions:{adminRegion:"#admin",pageRegion:"#page"},onRender:function(){this.model.get("short_name")&&(this.title=this.model.get("short_name"))},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){var e=this.assignments.toJSON().filter(function(e){return null===e.end_date||Date.parse(e.end_date)>=new Date});return t.extend({assignments:e,highlight:this.highlight},this.model.toJSON())}})}),define("hbs!templates/nav",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return' class="active"'}function s(e,t){var i,a,s,l="";return l+="\n    <li",a=n.if_eq||e&&e.if_eq,s={hash:{compare:"enlist"},inverse:p.noop,fn:p.program(1,r,t),data:t},i=a?a.call(e,e&&e.highlight,s):m.call(e,"if_eq",e&&e.highlight,s),(i||0===i)&&(l+=i),l+=' data-highlight="enlist"><a href="#enlist">',i=n["if"].call(e,e&&e.short_name,{hash:{},inverse:p.noop,fn:p.program(4,o,t),data:t}),(i||0===i)&&(l+=i),l+="Enlist</a></li>\n    "}function o(){return"Re-"}function l(e,t){var i,a,r="";return r+='\n    <li class="dropdown">\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown">',(a=n.short_name)?i=a.call(e,{hash:{},data:t}):(a=e&&e.short_name,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+' <b class="caret"></b></a>\n        <ul class="dropdown-menu">\n            <li><a href="#members/',(a=n.id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.id,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+'">Personnel File</a></li>\n            <li><a href="',(a=n.forumUrl)?i=a.call(e,{hash:{},data:t}):(a=e&&e.forumUrl,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+"/profile/",(a=n.forum_member_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.forum_member_id,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+"/",(a=n.short_name)?i=a.call(e,{hash:{},data:t}):(a=e&&e.short_name,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+'">Forum Profile</a></li>\n        </ul>\n    </li>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var c,h,u,d="",p=this,m=n.helperMissing,f="function",g=this.escapeExpression;return d+='<ul class="nav navbar-nav">\n    <li',h=n.if_eq||t&&t.if_eq,u={hash:{compare:"roster"},inverse:p.noop,fn:p.program(1,r,a),data:a},c=h?h.call(t,t&&t.highlight,u):m.call(t,"if_eq",t&&t.highlight,u),(c||0===c)&&(d+=c),d+=' data-highlight="roster"><a href="#">Roster</a></li>\n    <li',h=n.if_eq||t&&t.if_eq,u={hash:{compare:"calendar"},inverse:p.noop,fn:p.program(1,r,a),data:a},c=h?h.call(t,t&&t.highlight,u):m.call(t,"if_eq",t&&t.highlight,u),(c||0===c)&&(d+=c),d+=' data-highlight="calendar"><a href="#calendar">Calendar</a></li>\n    <li',h=n.if_eq||t&&t.if_eq,u={hash:{compare:"enlistments"},inverse:p.noop,fn:p.program(1,r,a),data:a},c=h?h.call(t,t&&t.highlight,u):m.call(t,"if_eq",t&&t.highlight,u),(c||0===c)&&(d+=c),d+=' data-highlight="enlistments"><a href="#enlistments">Enlistments</a></li>\n</ul>\n<ul class="nav navbar-nav navbar-right">\n    ',c=n.unless.call(t,t&&t.classes,{hash:{},inverse:p.noop,fn:p.program(3,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n    \n    ",c=n["if"].call(t,t&&t.short_name,{hash:{},inverse:p.noop,fn:p.program(6,l,a),data:a}),(c||0===c)&&(d+=c),d+="\n</ul>"})}),define("views/nav",["jquery","underscore","backbone","hbs!templates/nav","config","marionette"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:i,highlight:"home",modelEvents:{change:"render"},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){return t.extend({highlight:this.highlight,forumUrl:a.forumUrl},this.model.toJSON())}})}),define("hbs!templates/qualifications",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+='\n    <hr>\n    <h1 class="row header-row"> '+f((i=null==t||t===!1?t:t.key,typeof i===m?i.apply(e):i))+" <small>("+f((i=e&&e.percentage,typeof i===m?i.apply(e):i))+"%)</small></h1>\n    ",i=n.each.call(e,e,{hash:{},inverse:g.noop,fn:g.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\n"}function s(e,t){var i,a,r,s="";return s+="\n      ",a=n.unless_eq||e&&e.unless_eq,r={hash:{compare:"percentage"},inverse:g.noop,fn:g.program(3,o,t),data:t},i=a?a.call(e,null==t||t===!1?t:t.key,r):v.call(e,"unless_eq",null==t||t===!1?t:t.key,r),(i||0===i)&&(s+=i),s+=" \n    "}function o(e,t){var i,a,r,s="";return s+='\n      <div class="row">\n       <div class="col-sm-6">\n        ',a=n.unless_eq||e&&e.unless_eq,r={hash:{compare:"N/A"},inverse:g.noop,fn:g.program(4,l,t),data:t},i=a?a.call(e,null==t||t===!1?t:t.key,r):v.call(e,"unless_eq",null==t||t===!1?t:t.key,r),(i||0===i)&&(s+=i),s+="\n        <ul>\n        ",i=n.each.call(e,e,{hash:{},inverse:g.noop,fn:g.program(6,c,t),data:t}),(i||0===i)&&(s+=i),s+='\n        </ul>\n       </div>\n       <div class="col-sm-6">\n         \n           <img src=\'images/badges/'+f((i=e&&e.aqb_path,typeof i===m?i.apply(e):i))+".gif' ",i=n.unless.call(e,e&&e.aqb,{hash:{},inverse:g.noop,fn:g.program(11,d,t),data:t}),(i||0===i)&&(s+=i),s+=">\n        \n       </div>\n      </div>\n     "}function l(e,t){var n,i="";return i+="<h3>"+f((n=null==t||t===!1?t:t.key,typeof n===m?n.apply(e):n))+"</h3>"}function c(e,t){var i,a="";return a+='\n            <li style="list-style-type: none">\n                ',i=n["if"].call(e,(i=e&&e.qualification,null==i||i===!1?i:i.id),{hash:{},inverse:g.program(9,u,t),fn:g.program(7,h,t),data:t}),(i||0===i)&&(a+=i),a+="\n                "+f((i=e&&e.description,typeof i===m?i.apply(e):i))+"\n            </li>\n        "}function h(){return'\n                    <span class="glyphicon glyphicon-check"></span>\n                '}function u(){return'\n                    <span class="glyphicon glyphicon-unchecked"></span>\n                '}function d(){return"class='badge-inactive' "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var p,m="function",f=this.escapeExpression,g=this,v=n.helperMissing;return p=n.each.call(t,t&&t.items,{hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a}),p||0===p?p:""})}),define("views/qualifications",["jquery","underscore","backbone","hbs!templates/qualifications","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,initialize:function(e){e=e||{},this.awards=e.awards||!1},events:{"click .header:first":"onClickHeader"},onClickHeader:function(t){e(t.currentTarget).parent().siblings().toggle(300),e(t.currentTarget).parent().parent().toggleClass("collapsed")},appendHtml:function(e,t){this.$el.append(t.el)},serializeData:function(){var e=this.collection.toJSON(),n=this.awards.toJSON(),i={},a="",r="";return t.each(e,function(e){void 0===i[e.weapon]&&(i[e.weapon]={}),void 0===i[e.weapon][e.badge]&&(i[e.weapon][e.badge]=[],i[e.weapon][e.badge].aqb_path=e.badge+"\\"+e.weapon.replace(" ",""),i[e.weapon][e.badge].aqb_path=i[e.weapon][e.badge].aqb_path.toLowerCase()),i[e.weapon][e.badge].push(e)}),i.EIB["N/A"].aqb_path="eib",i.SLT["N/A"].aqb_path="slt",t.each(n,function(e){"eib"==e.award.abbr&&(i.EIB["N/A"].aqb=1),"acamp"==e.award.abbr&&(i.SLT["N/A"].aqb=1),":"===e.award.abbr.substr(1,1)&&(a=e.award.name.substr(0,e.award.name.indexOf(" ")),r=e.award.name.substr(e.award.name.indexOf(":")+2),r=r.substr(0,r.indexOf("(")-1),r=r.replace("Submachine Gun","SMG"),i[r][a].aqb=1)}),t.each(i,function(e){e["N/A"]?(percent=0,e["N/A"].aqb?percent+=100:(count1=count2=0,t.each(e["N/A"],function(e){count2++,e.qualification.id&&count1++}),percent+=Math.round(count1/count2*100)),e.percentage=percent):(percent=0,e.Marksman.aqb?percent+=100:(count1=count2=0,t.each(e.Marksman,function(e){count2++,e.qualification.id&&count1++}),percent+=Math.round(count1/count2*100)),e.Sharpshooter.aqb?percent+=100:(count1=count2=0,t.each(e.Sharpshooter,function(e){count2++,e.qualification.id&&count1++}),percent+=Math.round(count1/count2*100)),e.Expert.aqb?percent+=100:(count1=count2=0,t.each(e.Expert,function(e){count2++,e.qualification.id&&count1++}),percent+=Math.round(count1/count2*100)),e.percentage=percent)}),{items:i}}})}),define("hbs!templates/roster_collapsible",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return"out"}function s(){return"in"}function o(e,t){var i,a,r="";return r+='\n            <div class="row">\n                <div class="col-xs-8 col-sm-4 abbr"><a href="#units/',(a=n.key)?i=a.call(e,{hash:{},data:t}):(a=e&&e.key,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+'">',(a=n.abbr)?i=a.call(e,{hash:{},data:t}):(a=e&&e.abbr,i=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=g(i)+'</a></div>\n                <div class="col-xs-4 col-sm-8 count">('+g((i=e&&e.members,i=null==i||i===!1?i:i.length,typeof i===f?i.apply(e):i))+")</div>\n            </div>\n            "}function l(e,t){var i,a="";return a+='\n            <div class="row">\n                <div class="col-xs-2 col-sm-1">',i=n["if"].call(e,(i=e&&e.rank,null==i||i===!1?i:i.filename),{hash:{},inverse:b.noop,fn:b.program(8,c,t),data:t}),(i||0===i)&&(a+=i),a+='</div>\n                <div class="col-xs-10 col-sm-3"><a href="#members/'+g((i=e&&e.id,typeof i===f?i.apply(e):i))+'">'+g((i=e&&e.short_name,typeof i===f?i.apply(e):i))+'</a></div>\n                <div class="col-xs-12 col-sm-7">'+g((i=e&&e.position,i=null==i||i===!1?i:i.name,typeof i===f?i.apply(e):i))+'</div>\n                <div class="hidden-xs col-sm-1">',i=n["if"].call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),{hash:{},inverse:b.noop,fn:b.program(10,h,t),data:t}),(i||0===i)&&(a+=i),a+="</div>\n            </div>\n            "}function c(e){var t,n="";return n+='<img src="images/ranks/16x16/'+g((t=e&&e.rank,t=null==t||t===!1?t:t.filename,typeof t===f?t.apply(e):t))+'.png" title="'+g((t=e&&e.rank,t=null==t||t===!1?t:t.name,typeof t===f?t.apply(e):t))+'">'}function h(e,t){var i,a,r,s="";return s+='<img src="images/countries/'+g((a=n.toLowerCase||e&&e.toLowerCase,r={hash:{},data:t},a?a.call(e,(i=e&&e.country,null==i||i===!1?i:i.abbr),r):v.call(e,"toLowerCase",(i=e&&e.country,null==i||i===!1?i:i.abbr),r)))+'.png" title="'+g((i=e&&e.country,i=null==i||i===!1?i:i.name,typeof i===f?i.apply(e):i))+'">'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var u,d,p,m="",f="function",g=this.escapeExpression,v=n.helperMissing,b=this;return m+='<div class="panel panel-default" id="',(d=n.key)?u=d.call(t,{hash:{},data:a}):(d=t&&t.key,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n    <div class="panel-heading">\n        <!--<span class="glyphicon glyphicon-plus icon-collapsed"></span>\n        <span class="glyphicon glyphicon-minus icon-expanded"></span>-->\n        <a data-toggle="collapse" data-parent="#',(d=n.key)?u=d.call(t,{hash:{},data:a}):(d=t&&t.key,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'" href="#collapse-',(d=n.key)?u=d.call(t,{hash:{},data:a}):(d=t&&t.key,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">',(d=n.name)?u=d.call(t,{hash:{},data:a}):(d=t&&t.name,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'</a>\n    </div>\n    <div class="panel-collapse collapse ',d=n.if_gt||t&&t.if_gt,p={hash:{compare:1},inverse:b.program(3,s,a),fn:b.program(1,r,a),data:a},u=d?d.call(t,t&&t.depth,p):v.call(t,"if_gt",t&&t.depth,p),(u||0===u)&&(m+=u),m+='" id="collapse-',(d=n.key)?u=d.call(t,{hash:{},data:a}):(d=t&&t.key,u=typeof d===f?d.call(t,{hash:{},data:a}):d),m+=g(u)+'">\n        <div class="panel-body">\n            ',u=n["if"].call(t,(u=t&&t.members,null==u||u===!1?u:u.length),{hash:{},inverse:b.noop,fn:b.program(5,o,a),data:a}),(u||0===u)&&(m+=u),m+="\n            \n            ",u=n.each.call(t,t&&t.members,{hash:{},inverse:b.noop,fn:b.program(7,l,a),data:a}),(u||0===u)&&(m+=u),m+='\n            \n            <div class="children"></div>\n        </div>\n    </div>\n</div>'})}),define("hbs!templates/roster_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t){var i,a="";return a+="\r\n    ",i=n.each.call(e,e&&e.members,{hash:{},inverse:m.noop,fn:m.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+="\r\n"}function s(e,t){var i,a="";return a+='\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-12">\r\n                <label>\r\n                    <input type="checkbox" name="attendance" value="'+p((i=e&&e.id,typeof i===d?i.apply(e):i))+'"',i=n["if"].call(e,e&&e.attended,{hash:{},inverse:m.noop,fn:m.program(3,o,t),data:t}),(i||0===i)&&(a+=i),a+='>\r\n                    <a href="#members/'+p((i=e&&e.id,typeof i===d?i.apply(e):i))+'">'+p((i=e&&e.short_name,typeof i===d?i.apply(e):i))+"</a>\r\n                    ",i=n["if"].call(e,e&&e.excused,{hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t}),(i||0===i)&&(a+=i),a+="\r\n                </label>\r\n        </div>\r\n    </div>\r\n    "
}function o(){return' checked="checked"'}function l(){return'<span class="label label-warning">Excused</span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var c,h,u="",d="function",p=this.escapeExpression,m=this;return u+='<div class="row header-row">\r\n    <div class="col-sm-12 header">',(h=n.name)?c=h.call(t,{hash:{},data:a}):(h=t&&t.name,c=typeof h===d?h.call(t,{hash:{},data:a}):h),u+=p(c)+'</div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-xs-12 col-sm-12 abbr">',(h=n.abbr)?c=h.call(t,{hash:{},data:a}):(h=t&&t.abbr,c=typeof h===d?h.call(t,{hash:{},data:a}):h),u+=p(c)+" ("+p((c=t&&t.members,c=null==c||c===!1?c:c.length,typeof c===d?c.apply(t):c))+")</div>\r\n</div>\r\n",c=n["if"].call(t,(c=t&&t.members,null==c||c===!1?c:c.length),{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(c||0===c)&&(u+=c),u})}),define("views/roster",["jquery","underscore","backbone","marionette","handlebars","hbs!templates/roster_collapsible","hbs!templates/roster_attendance","marionette"],function(e,t,n,i,a,r,s){var o=n.Marionette.CompositeView.extend({template:r,tagName:"div",initialize:function(e){e=e||{},this.itemViewOptions=this.itemViewOptions||{},e.eventAttendance&&(this.eventAttendance=e.eventAttendance,this.itemViewOptions.eventAttendance=e.eventAttendance),e.attendance&&(this.template=s,this.itemViewOptions.attendance=!0),this.collection=this.model.get("children"),this.$el.addClass("unit").addClass("depth-"+this.model.get("depth"))},appendHtml:function(e,t){this.itemViewOptions.attendance?this.$el.append(t.el):e.$(".children:first").append(t.el)},onBeforeRender:function(){t.isEmpty(this.eventAttendance)||(eventAttendance=this.eventAttendance,t.each(this.model.get("members"),function(e){var t=eventAttendance.find(function(t){return t.get("member").id===e.id});t&&(e.attended=t.get("attended"),e.excused=t.get("excused"))}))}});return n.Marionette.CollectionView.extend({itemView:o,title:"Roster",className:"roster",initialize:function(e){e=e||{},this.itemViewOptions=this.itemViewOptions||{},e.attendance&&(this.itemViewOptions.attendance=!0),e.eventAttendance&&(this.itemViewOptions.eventAttendance=e.eventAttendance)}})}),define("hbs!templates/service_record",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(e,t,i){var a,r,c,h="";return h+="\n    <h3>",r=n.unless_eq||e&&e.unless_eq,c={hash:{compare:"undefined"},inverse:R.program(4,o,t),fn:R.program(2,s,t),data:t},a=r?r.call(e,e&&e.date,c):F.call(e,"unless_eq",e&&e.date,c),(a||0===a)&&(h+=a),h+="</h3>\n    ",a=n.each.call(e,e&&e.items,{hash:{},inverse:R.noop,fn:R.programWithDepth(6,l,t,i),data:t}),(a||0===a)&&(h+=a),h+="\n"}function s(e,t){var i,a;return C((i=n.dateFormat||e&&e.dateFormat,a={hash:{format:"ll"},data:t},i?i.call(e,e&&e.date,a):F.call(e,"dateFormat",e&&e.date,a)))}function o(){return"Unknown"}function l(e,t,i){var a,r="";return r+="\n        ",a=n["if"].call(e,e&&e.position,{hash:{},inverse:R.noop,fn:R.programWithDepth(7,c,t,i),data:t}),(a||0===a)&&(r+=a),r+="\n        ",a=n["if"].call(e,e&&e.new_rank,{hash:{},inverse:R.noop,fn:R.program(17,f,t),data:t}),(a||0===a)&&(r+=a),r+="\n        ",a=n["if"].call(e,e&&e.award,{hash:{},inverse:R.noop,fn:R.program(22,b,t),data:t}),(a||0===a)&&(r+=a),r+="\n        ",a=n["if"].call(e,e&&e.status,{hash:{},inverse:R.noop,fn:R.program(25,_,t),data:t}),(a||0===a)&&(r+=a),r+="\n        ",a=n["if"].call(e,e&&e.type,{hash:{},inverse:R.noop,fn:R.program(28,x,t),data:t}),(a||0===a)&&(r+=a),r+="\n    "}function c(e,t,i){var a,r,s,o,l="";return l+='\n            <li>\n              Assigned to <a href="#/units/'+C((a=e&&e.unit,a=null==a||a===!1?a:a.key,typeof a===O?a.apply(e):a))+'" title="'+C((a=e&&e.unit,a=null==a||a===!1?a:a.name,typeof a===O?a.apply(e):a))+'">',s=n.if_eq||e&&e.if_eq,o={hash:{compare:"Staff"},inverse:R.program(10,u,t),fn:R.program(8,h,t),data:t},a=s?s.call(e,(a=e&&e.unit,null==a||a===!1?a:a["class"]),o):F.call(e,"if_eq",(a=e&&e.unit,null==a||a===!1?a:a["class"]),o),(a||0===a)&&(l+=a),l+="</a> as a "+C((a=e&&e.position,a=null==a||a===!1?a:a.name,typeof a===O?a.apply(e):a))+"\n              ",s=n.if_eq||e&&e.if_eq,o={hash:{compare:"Staff"},inverse:R.noop,fn:R.program(12,d,t),data:t},a=s?s.call(e,(a=e&&e.unit,null==a||a===!1?a:a["class"]),o):F.call(e,"if_eq",(a=e&&e.unit,null==a||a===!1?a:a["class"]),o),(a||0===a)&&(l+=a),l+="\n              \n              ",s=n.if_inarray||i&&i.if_inarray,o={hash:{compare:i&&i.permissions},data:t},a=s?s.call(e,"assignment_add_any",o):F.call(e,"if_inarray","assignment_add_any",o),s=n.if_inarray||i&&i.if_inarray,o={hash:{compare:i&&i.memberPermissions},data:t},r=s?s.call(e,"assignment_add",o):F.call(e,"if_inarray","assignment_add",o),s=n.or||i&&i.or,o={hash:{},inverse:R.noop,fn:R.program(15,m,t),data:t},a=s?s.call(e,r,a,o):F.call(e,"or",r,a,o),(a||0===a)&&(l+=a),l+="\n            </li>\n        "}function h(e){var t;return C((t=e&&e.unit,t=null==t||t===!1?t:t.name,typeof t===O?t.apply(e):t))}function u(e){var t;return C((t=e&&e.unit,t=null==t||t===!1?t:t.abbr,typeof t===O?t.apply(e):t))}function d(e,t){var i;return i=n["if"].call(e,e&&e.end_date,{hash:{},inverse:R.noop,fn:R.program(13,p,t),data:t}),i||0===i?i:""}function p(e,t){var i,a,r="";return r+=" (until "+C((i=n.dateFormat||e&&e.dateFormat,a={hash:{format:"ll"},data:t},i?i.call(e,e&&e.end_date,a):F.call(e,"dateFormat",e&&e.end_date,a)))+")"}function m(e){var t,n="";return n+='\n                <a href="#/assignments/'+C((t=e&&e.id,typeof t===O?t.apply(e):t))+'/edit"><span class="glyphicon glyphicon-edit"></span></a>\n              '}function f(e,t){var i,a,r,s="";return s+='\n            <li>\n              <img src="images/ranks/16x16/'+C((i=e&&e.new_rank,i=null==i||i===!1?i:i.filename,typeof i===O?i.apply(e):i))+'.png" title="'+C((i=e&&e.rank,i=null==i||i===!1?i:i.name,typeof i===O?i.apply(e):i))+'">',a=n.unless_lt||e&&e.unless_lt,r={hash:{compare:(i=e&&e.old_rank,null==i||i===!1?i:i.order)},inverse:R.program(20,v,t),fn:R.program(18,g,t),data:t},i=a?a.call(e,(i=e&&e.new_rank,null==i||i===!1?i:i.order),r):F.call(e,"unless_lt",(i=e&&e.new_rank,null==i||i===!1?i:i.order),r),(i||0===i)&&(s+=i),s+=" to "+C((i=e&&e.new_rank,i=null==i||i===!1?i:i.name,typeof i===O?i.apply(e):i))+"\n            </li>\n        "}function g(){return"Promoted"}function v(){return"Demoted"}function b(e,t){var i,a,r,s="";return s+='\n            <li> <img src="images/awards/',a=n.award_img_name||e&&e.award_img_name,r={hash:{},inverse:R.noop,fn:R.program(23,y,t),data:t},i=a?a.call(e,(i=e&&e.award,null==i||i===!1?i:i.abbr),r):F.call(e,"award_img_name",(i=e&&e.award,null==i||i===!1?i:i.abbr),r),(i||0===i)&&(s+=i),s+='.gif" title="'+C((i=e&&e.award,i=null==i||i===!1?i:i.name,typeof i===O?i.apply(e):i))+'"> Awarded '+C((i=e&&e.award,i=null==i||i===!1?i:i.name,typeof i===O?i.apply(e):i))+"</li>\n        "}function y(){var e="";return e}function _(e,t){var i,a="";return a+='\n            <li><a href="#enlistments/'+C((i=e&&e.id,typeof i===O?i.apply(e):i))+'">Enlisted</a>',i=n["if"].call(e,e&&e.unit_id,{hash:{},inverse:R.noop,fn:R.program(26,w,t),data:t}),(i||0===i)&&(a+=i),a+="</li>\n        "}function w(e){var t,n="";return n+=' in the <a href="#units/'+C((t=e&&e.unit,t=null==t||t===!1?t:t.key,typeof t===O?t.apply(e):t))+'">'+C((t=e&&e.unit,t=null==t||t===!1?t:t.abbr,typeof t===O?t.apply(e):t))+"</a>"}function x(e,t){var i,a,r,s="";return s+="\n            <li>\n            ",a=n.if_eq||e&&e.if_eq,r={hash:{compare:"Honorable"},inverse:R.noop,fn:R.program(29,A,t),data:t},i=a?a.call(e,e&&e.type,r):F.call(e,"if_eq",e&&e.type,r),(i||0===i)&&(s+=i),s+="\n            ",a=n.if_eq||e&&e.if_eq,r={hash:{compare:"Dishonorable"},inverse:R.noop,fn:R.program(31,k,t),data:t},i=a?a.call(e,e&&e.type,r):F.call(e,"if_eq",e&&e.type,r),(i||0===i)&&(s+=i),s+="\n            ",a=n.if_eq||e&&e.if_eq,r={hash:{compare:"General"},inverse:R.noop,fn:R.program(33,S,t),data:t},i=a?a.call(e,e&&e.type,r):F.call(e,"if_eq",e&&e.type,r),(i||0===i)&&(s+=i),s+='\n            <a href="#discharges/'+C((i=e&&e.id,typeof i===O?i.apply(e):i))+'">Discharged</a></li>\n        '}function A(){return"Honorably"}function k(){return"Dishonorably"}function S(){return"Generaly"}function E(e,t){var i,a,r="";return r+='<a href="',(a=n.coatDir)?i=a.call(e,{hash:{},data:t}):(a=e&&e.coatDir,i=typeof a===O?a.call(e,{hash:{},data:t}):a),r+=C(i)+"/",(a=n.steam_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.steam_id,i=typeof a===O?a.call(e,{hash:{},data:t}):a),r+=C(i)+'.png"><img src="',(a=n.coatDir)?i=a.call(e,{hash:{},data:t}):(a=e&&e.coatDir,i=typeof a===O?a.call(e,{hash:{},data:t}):a),r+=C(i)+"/",(a=n.steam_id)?i=a.call(e,{hash:{},data:t}):(a=e&&e.steam_id,i=typeof a===O?a.call(e,{hash:{},data:t}):a),r+=C(i)+'.png" class="coat"></a>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var N,I="",F=n.helperMissing,C=this.escapeExpression,O="function",R=this;return I+='<div class="row">\n    <div class="col-sm-6">\n',N=n.each.call(t,t&&t.items,{hash:{},inverse:R.noop,fn:R.programWithDepth(1,r,a,t),data:a}),(N||0===N)&&(I+=N),I+='\n    </div>\n    <div class="col-sm-6">\n    ',N=n["if"].call(t,t&&t.steam_id,{hash:{},inverse:R.noop,fn:R.program(35,E,a),data:a}),(N||0===N)&&(I+=N),I+="\n    </div>\n</div>"})}),define("views/service_record",["jquery","underscore","backbone","config","hbs!templates/service_record","marionette"],function(e,t,n,i,a){return n.Marionette.ItemView.extend({template:a,initialize:function(e){e=e||{},this.permissions=e.permissions||{},this.permissions.on("reset",this.render,this),this.memberPermissions=e.memberPermissions||{},this.memberPermissions.on("reset",this.render,this),this.assignments=e.assignments||!1,this.promotions=e.promotions||!1,this.awardings=e.awardings||!1,this.discharges=e.discharges||!1,this.enlistments=e.enlistments||!1},serializeData:function(){var n=[],a=t.groupBy(this.assignments.toJSON().concat(this.promotions.toJSON(),this.awardings.toJSON(),this.discharges.toJSON(),this.enlistments.toJSON()),function(e){return e.start_date||e.date});return t.each(a,function(e,t){n.push({date:t,items:e})}),n.sort(function(e,t){return e.date<t.date?1:t.date<e.date?-1:0}),e.extend({items:n,coatDir:i.coatDir,permissions:this.permissions.length?this.permissions.pluck("abbr"):[],memberPermissions:this.memberPermissions.length?this.memberPermissions.pluck("abbr"):[]},this.model.toJSON())}})}),define("hbs!templates/unit_attendance",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{},'<table class="table">\n    <thead>\n        <tr>\n            <th>Date</th>\n            <th colspan="2">Unit</th>\n            <th>Type</th>\n            <th>Attended</th>\n            <th>AWOLs</th>\n        </tr>\n    </thead>\n    <tbody id="rows"></tbody>\n</table>\n\n<button class="btn btn-large btn-block more" type="button" data-loading-text="Loading" data-error-text="Error">More</button>'})}),define("hbs!templates/unit_attendance_item",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return'<span class="label label-info">Mandatory</span>'}function s(){return'<span class="label label-default">Non-Mandatory</span>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,l,c,h="",u="function",d=this.escapeExpression,p=n.helperMissing,m=this;return h+='<td><a href="#events/'+d((o=t&&t.event,o=null==o||o===!1?o:o.id,typeof o===u?o.apply(t):o))+'">'+d((l=n.dateFormat||t&&t.dateFormat,c={hash:{format:"ll HH:mm"},data:a},l?l.call(t,(o=t&&t.event,null==o||o===!1?o:o.datetime),c):p.call(t,"dateFormat",(o=t&&t.event,null==o||o===!1?o:o.datetime),c)))+'</a></td>\n<td><a href="#units/'+d((o=t&&t.unit,o=null==o||o===!1?o:o.key,typeof o===u?o.apply(t):o))+'">'+d((l=n.str_replace||t&&t.str_replace,c={hash:{},data:a},l?l.call(t,(o=t&&t.unit,null==o||o===!1?o:o.abbr),"HQ","",c):p.call(t,"str_replace",(o=t&&t.unit,null==o||o===!1?o:o.abbr),"HQ","",c)))+'</a></td>\n<td class="text-center">\n    ',o=n["if"].call(t,(o=t&&t.event,null==o||o===!1?o:o.mandatory),{hash:{},inverse:m.program(3,s,a),fn:m.program(1,r,a),data:a}),(o||0===o)&&(h+=o),h+="\n</td>\n<td>\n    "+d((o=t&&t.event,o=null==o||o===!1?o:o.type,typeof o===u?o.apply(t):o))+"\n</td>\n<td>",(l=n.attended)?o=l.call(t,{hash:{},data:a}):(l=t&&t.attended,o=typeof l===u?l.call(t,{hash:{},data:a}):l),h+=d(o)+" / "+d((l=n.add||t&&t.add,c={hash:{},data:a},l?l.call(t,t&&t.attended,t&&t.absent,c):p.call(t,"add",t&&t.attended,t&&t.absent,c)))+"</td>\n<td>"+d((l=n.subtract||t&&t.subtract,c={hash:{},data:a},l?l.call(t,t&&t.absent,t&&t.excused,c):p.call(t,"subtract",t&&t.absent,t&&t.excused,c)))+"</td>"})}),define("views/unit_attendance",["jquery","underscore","backbone","hbs!templates/unit_attendance","hbs!templates/unit_attendance_item","marionette"],function(e,t,n,i,a){var r=n.Marionette.ItemView.extend({template:a,tagName:"tr"});return n.Marionette.CompositeView.extend({template:i,itemView:r,itemViewContainer:"#rows",_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},this)},initialize:function(){t.bindAll(this,"onClickMore")},events:{"click .more":"onClickMore"},onRender:function(){this.checkMoreButton()},onClickMore:function(t){t.preventDefault();var n=this,i=e(t.currentTarget);i.button("loading"),this.collection.nextPage().fetch({remove:!1,success:function(){i.button("reset"),n.checkMoreButton()},error:function(){i.button("error")}})},checkMoreButton:function(){this.$(".more").toggle(this.collection.more)}})}),define("hbs!templates/unit_awols",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){return" active"}function s(e,t){var i,a="";return a+='\n    <h3><a href="#members/'+m((i=e&&e.member,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'">'+m((i=e&&e.member,i=null==i||i===!1?i:i.short_name,typeof i===p?i.apply(e):i))+"</a> <small>("+m((i=e&&e.events,i=null==i||i===!1?i:i.length,typeof i===p?i.apply(e):i))+")</small></h3>\n    <ul>\n    ",i=n.each.call(e,e&&e.events,{hash:{},inverse:g.noop,fn:g.program(4,o,t),data:t}),(i||0===i)&&(a+=i),a+="\n    </ul>\n"}function o(e,t){var i,a,r,s="";return s+='\n        <li><a href="#events/'+m((i=e&&e.id,typeof i===p?i.apply(e):i))+'">'+m((a=n.dateFormat||e&&e.dateFormat,r={hash:{format:"ll HH:mm"},data:t},a?a.call(e,e&&e.datetime,r):f.call(e,"dateFormat",e&&e.datetime,r)))+" "+m((i=e&&e.type,typeof i===p?i.apply(e):i))+"</a></li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c,h,u,d="",p="function",m=this.escapeExpression,f=n.helperMissing,g=this;return d+='<div class="btn-group" id="filter-days">\n    <button type="button" class="btn btn-default',h=n.if_eq||t&&t.if_eq,u={hash:{compare:""},data:a},l=h?h.call(t,t&&t.days,u):f.call(t,"if_eq",t&&t.days,u),h=n.if_eq||t&&t.if_eq,u={hash:{compare:30},data:a},c=h?h.call(t,t&&t.days,u):f.call(t,"if_eq",t&&t.days,u),h=n.or||t&&t.or,u={hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a},l=h?h.call(t,c,l,u):f.call(t,"or",c,l,u),(l||0===l)&&(d+=l),d+='" data-days="30">30 Days</button>\n    <button type="button" class="btn btn-default',h=n.if_eq||t&&t.if_eq,u={hash:{compare:60},inverse:g.noop,fn:g.program(1,r,a),data:a},l=h?h.call(t,t&&t.days,u):f.call(t,"if_eq",t&&t.days,u),(l||0===l)&&(d+=l),d+='" data-days="60">60 Days</button>\n    <button type="button" class="btn btn-default',h=n.if_eq||t&&t.if_eq,u={hash:{compare:90},inverse:g.noop,fn:g.program(1,r,a),data:a},l=h?h.call(t,t&&t.days,u):f.call(t,"if_eq",t&&t.days,u),(l||0===l)&&(d+=l),d+='" data-days="90">90 Days</button>\n</div>\n\n',l=n.each.call(t,t&&t.items,{hash:{},inverse:g.noop,fn:g.program(3,s,a),data:a}),(l||0===l)&&(d+=l),d})}),define("views/unit_awols",["jquery","underscore","backbone","hbs!templates/unit_awols","marionette"],function(e,t,n,i){return n.Marionette.ItemView.extend({template:i,events:{"click .btn-group .btn":"onClickBtnGroup"},collectionEvents:{reset:"render"},onClickBtnGroup:function(t){var n=e(t.currentTarget),i=n.data("days");e(".btn-group .btn").removeClass("active"),n.addClass("active"),this.collection.setFilter("days",i).fetch({reset:!0})},serializeData:function(){return{days:this.collection.days,items:this.collection.toJSON()}}})}),define("hbs!templates/unit",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function r(){var e="";return e}function s(){return"<h5><span style='color:red;'>Unit is not active</span></h5> "}function o(){return' class="active"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var l,c,h,u="",d="function",p=this.escapeExpression,m=this,f=n.helperMissing;return u+='<div class="row header">\n    <div class="col-sm-10">\n        <div class="title">',(c=n.name)?l=c.call(t,{hash:{},data:a}):(c=t&&t.name,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+" <abbr>(",(c=n.abbr)?l=c.call(t,{hash:{},data:a}):(c=t&&t.abbr,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+")</abbr>",l=n["if"].call(t,t&&t.active,{hash:{},inverse:m.program(3,s,a),fn:m.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='</div>\n    </div>\n    <div class="col-sm-2" id="admin"></div>\n</div>\n<div class="row">\n    <div class="col-sm-12">\n        <ul class="nav nav-tabs">\n            <li',c=n.if_eq||t&&t.if_eq,h={hash:{compare:"roster"},inverse:m.noop,fn:m.program(5,o,a),data:a},l=c?c.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(l||0===l)&&(u+=l),u+=' data-highlight="roster"><a href="#units/',(c=n.key)?l=c.call(t,{hash:{},data:a}):(c=t&&t.key,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+'">Roster</a></li>\n            <li',c=n.if_eq||t&&t.if_eq,h={hash:{compare:"attendance"},inverse:m.noop,fn:m.program(5,o,a),data:a},l=c?c.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(l||0===l)&&(u+=l),u+=' data-highlight="attendance"><a href="#units/',(c=n.key)?l=c.call(t,{hash:{},data:a}):(c=t&&t.key,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+'/attendance">Attendance</a></li>\n            <li',c=n.if_eq||t&&t.if_eq,h={hash:{compare:"awols"},inverse:m.noop,fn:m.program(5,o,a),data:a},l=c?c.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(l||0===l)&&(u+=l),u+=' data-highlight="awols"><a href="#units/',(c=n.key)?l=c.call(t,{hash:{},data:a}):(c=t&&t.key,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+'/awols">AWOLs</a></li>\n            <!--<li',c=n.if_eq||t&&t.if_eq,h={hash:{compare:"qualifications"},inverse:m.noop,fn:m.program(5,o,a),data:a},l=c?c.call(t,t&&t.highlight,h):f.call(t,"if_eq",t&&t.highlight,h),(l||0===l)&&(u+=l),u+=' data-highlight="qualifications"><a href="#members/',(c=n.unit_key)?l=c.call(t,{hash:{},data:a}):(c=t&&t.unit_key,l=typeof c===d?c.call(t,{hash:{},data:a}):c),u+=p(l)+'/qualifications">Qualifications</a></li>-->\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="col-sm-12" id="page"></div>\n</div>'})}),define("views/unit",["jquery","underscore","backbone","hbs!templates/unit","marionette"],function(e,t,n,i){return n.Marionette.Layout.extend({template:i,className:"unit",title:"Unit",initialize:function(e){e=e||{}},modelEvents:{change:"render"},regions:{adminRegion:"#admin",pageRegion:"#page"},setHighlight:function(e){this.highlight=e,this.$(".nav li").removeClass("active"),e&&this.$('.nav li[data-highlight="'+e+'"]').addClass("active")},serializeData:function(){return t.extend({highlight:this.highlight},this.collection.length?this.collection.at(0).toJSON():{})},onRender:function(){var e=this.collection.length?this.collection.at(0):{};e&&e.get("name")&&(this.title=e.get("name"))}})}),function(e,t,n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define("bbcode",[],function(){return n()}):t[e]=n()}("bbcode",this,function(){var e="0.1.0",t={},n={showQuotePrefix:!0,classPrefix:"bbcode_"};return t.version=e,t.render=function(e,t){var i,a,r,s,o={};t=t||{};for(s in n)s in t||(t[s]=n[s]);var l=function(e,n,i,a){switch(n=n.toLowerCase(),i&&i.length>=2&&('"'===i[0]&&'"'===i[i.length-1]||"'"===i[0]&&"'"===i[i.length-1])&&(i=i.slice(1,-1)),n){case"quote":return'<div class="'+t.classPrefix+'quote">'+(i?i+" wrote:":t.showQuotePrefix?"Quote:":"")+"<blockquote>"+a+"</blockquote></div>";case"url":return'<a class="'+t.classPrefix+'link" target="_blank" href="'+(i||a)+'">'+a+"</a>";case"email":return'<a class="'+t.classPrefix+'link" target="_blank" href="mailto:'+(i||a)+'">'+a+"</a>";case"anchor":return'<a name="'+(i||a)+'">'+a+"</a>";case"b":return"<strong>"+a+"</strong>";case"i":return"<em>"+a+"</em>";case"u":return'<span style="text-decoration:underline">'+a+"</span>";case"u":return'<span style="text-decoration:line-through">'+a+"</span>";case"code":return'<pre class="'+t.classPrefix+'code">'+a+"</pre>";case"span":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"<"+n+">"+a+"</"+n+">";case"youtube":return'<object class="'+t.classPrefix+'video" width="425" height="350"><param name="movie" value="http://www.youtube.com/v/'+a+'"></param><embed src="http://www.youtube.com/v/'+a+'" type="application/x-shockwave-flash" width="425" height="350"></embed></object>';case"gvideo":return'<embed class="'+t.classPrefix+'video" style="width:400px; height:325px;" id="VideoPlayback" type="application/x-shockwave-flash" src="http://video.google.com/googleplayer.swf?docId='+a+'&amp;hl=en">';case"google":return'<a class="'+t.classPrefix+'link" target="_blank" href="http://www.google.com/search?q='+(i||a)+'">'+a+"</a>";case"wikipedia":return'<a class="'+t.classPrefix+'link" target="_blank" href="http://www.wikipedia.org/wiki/'+(i||a)+'">'+a+"</a>";case"img":var r=new RegExp("^(\\d+)x(\\d+)$").exec(i||"");return r&&3===r.length||(r=new RegExp("^width=(\\d+)\\s+height=(\\d+)$").exec(i||"")),r&&3===r.length&&(i=void 0),'<img class="'+t.classPrefix+'image" src="'+a+'"'+(r&&3===r.length?' width="'+r[1]+'" height="'+r[2]+'"':"")+(i?' alt="'+(r&&3===r.length?"":i)+'"':"")+"/>"}return e};o["\\[(\\w+)(?:[= ]([^\\]]+))?]((?:.|[\r\n])*?)\\[/\\1]"]=l;do{r=!1;for(i in o)a=new RegExp(i,"gi"),s=e.replace(a,o[i]),r=s!==e,r&&(e=s)}while(r);return e},t}),define("handlebars.helpers",["jquery","underscore","handlebars","moment","bbcode"],function(e,t,n,i,a){n.registerHelper("if_eq",function(e,t){return e==t.hash.compare?t.fn?t.fn(this):!0:t.inverse?t.inverse(this):!1}),n.registerHelper("unless_eq",function(e,t){return e==t.hash.compare?t.inverse(this):t.fn(this)}),n.registerHelper("if_gt",function(e,t){return e>t.hash.compare?t.fn(this):t.inverse(this)}),n.registerHelper("unless_gt",function(e,t){return e>t.hash.compare?t.inverse(this):t.fn(this)}),n.registerHelper("if_lt",function(e,t){return e<t.hash.compare?t.fn(this):t.inverse(this)}),n.registerHelper("unless_lt",function(e,t){return e<t.hash.compare?t.inverse(this):t.fn(this)}),n.registerHelper("if_gteq",function(e,t){return e>=t.hash.compare?t.fn(this):t.inverse(this)}),n.registerHelper("unless_gteq",function(e,t){return e>=t.hash.compare?t.inverse(this):t.fn(this)}),n.registerHelper("if_lteq",function(e,t){return e<=t.hash.compare?t.fn(this):t.inverse(this)}),n.registerHelper("unless_lteq",function(e,t){return e<=t.hash.compare?t.inverse(this):t.fn(this)}),n.registerHelper("nl2br",function(e){e=n.Utils.escapeExpression(e);var t=(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2");return new n.SafeString(t)}),n.registerHelper("if_inarray",function(e,t){return t.hash.compare.indexOf(e)>-1?t.fn?t.fn(this):!0:t.inverse?t.inverse(this):!1}),n.registerHelper("inarray",function(e,t){return t.hash.haystack.indexOf(t.hash.needle)>-1?"1":"0"}),n.registerHelper("dateFormat",function(e,t){if(i){var n=t.hash.format||"MMM Do, YYYY";return i(e).format(n)}return e}),n.registerHelper("join",function(e,t){return e.join(t.hash.delimiter)}),n.registerHelper("or",function(e,t,n){return e||t?n.fn(this):n.inverse(this)}),n.registerHelper("and",function(e,t,n){return e&&t?n.fn(this):n.inverse(this)}),n.registerHelper("add",function(e,t){return e+t}),n.registerHelper("subtract",function(e,t){return e-t}),n.registerHelper("length",function(e){return e.length}),n.registerHelper("select",function(t,n){var i=e("<select />").html(n.fn(this));return i.find("[value="+t+"]").attr({selected:"selected"}),i.html()}),n.registerHelper("toLowerCase",function(e){return e&&"string"==typeof e?e.toLowerCase():e}),n.registerHelper("chain",function(){var t,i=[];return e.each(arguments,function(a,r){return n.helpers[r]?void i.push(n.helpers[r]):(t=r,e.each(i,function(e,n){t=n(t,arguments[a+1])}),!1)}),t}),n.registerHelper("substring",function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1,-1);return String.prototype.substring.call(e,t)}),n.registerHelper("enlistment_label",function(e){return"Accepted"===e?"primary":"Withdrawn"===e?"warning":"Denied"===e?"danger":"default"}),n.registerHelper("bbcode",function(e){return new n.SafeString(a.render(e.replace(/\n/g,"<br>")))}),n.registerHelper("within_24_hours",function(e,t){var n=i(e),a="string"==typeof t?i(t):i();return Math.abs(n.diff(a,"hours"))<=24}),n.registerHelper("past",function(e){return i(e).isBefore(i())}),n.registerHelper("award_img_name",function(e){switch(beg=e.substr(0,2)){case"m:":return"marks";case"s:":return"sharps";case"e:":return"expert"}return e}),n.registerHelper("str_replace",function(e,t,n){return e.replace(t,n)}),n.registerHelper("debug",function(e){console.log("Current Context"),console.log("===================="),console.log(this),e&&(console.log("Value"),console.log("===================="),console.log(e))})}),define("validation.config",["jquery","underscore","backbone.validation"],function(e,t){t.extend(Backbone.Validation.callbacks,{valid:function(t,n){var i=t.$("[name="+n+"]"),a=i.closest(".form-group"),r=a.find(".error-msg");r.length||(r=e("<div/>").addClass("help-block").addClass("error-msg").appendTo(a)),a.removeClass("has-error"),r.html("").addClass("hidden")},invalid:function(t,n,i){var a=t.$("[name="+n+"]"),r=a.closest(".form-group"),s=r.find(".error-msg");s.length||(s=e("<div/>").addClass("help-block").addClass("error-msg").appendTo(r)),r.addClass("has-error"),s.html(i).removeClass("hidden")}})}),define("router",["jquery","underscore","backbone","marionette","handlebars","util","models/assignment","models/discharge","models/enlistment","models/event","models/member","models/user","collections/assignments","collections/awardings","collections/discharges","collections/enlistments","collections/event_attendance","collections/events","collections/member_attendance","collections/member_awols","collections/member_enlistments","collections/permissions","collections/positions","collections/promotions","collections/qualifications","collections/unit_attendance","collections/unit_awols","collections/units","views/aar","views/assignment_edit","views/calendar","views/discharge","views/enlistment_edit","views/enlistment_process","views/enlistments","views/enlistment","views/event","views/flash","views/member_admin","views/member_attendance","views/member_discharge","views/member_edit","views/member_profile","views/member","views/nav","views/qualifications","views/roster","views/service_record","views/unit_attendance","views/unit_awols","views/unit","handlebars.helpers","jquery-bootstrap","moment","backbone.validation","validation.config"],function(e,t,n,i,a,r,s,o,l,c,h,u,d,p,m,f,g,v,b,y,_,w,x,A,k,S,E,N,I,F,C,O,R,q,D,M,P,L,T,H,j,U,B,V,$,z,G,W,J,Y,K){return n.Router.extend({routes:{"":"roster","assignments/:id/edit":"assignment_edit",calendar:"calendar","discharges/:id":"discharge","events/:id":"event","events/:id/aar":"aar","enlistments/:id/edit":"enlistment_edit","enlistments/:id/process":"enlistment_process","enlistments/:id":"enlistment",enlistments:"enlistments",enlist:"enlistment_edit","members/:id/assign":"assignment_add","members/:id/*path":"member","members/:id":"member","units/:filter/*path":"unit","units/:filter":"unit"},initialize:function(t){t=t||{},this.app=t.app||new n.Marionette.Application;this.user||(this.user=new u,e.when(this.user.fetch()).done(function(){}));var i=new $({model:this.user});this.app.navRegion.show(i)},showView:function(t){this.app.mainRegion.show(t),document.title=void 0!==t.title&&t.title?t.title:e("title").text(),r.scrollToTop()},aar:function(t){var n=this,i=[],a=new c({id:t}),r=new N(null,{children:!0,members:!0,active:!0}),s=new g(null,{id:t}),o=new I({model:a}),l=new G({collection:r,eventAttendance:s,attendance:!0});a.on("error",function(e,t){n.flash(t.responseJSON.error||"","error")}),this.app.navRegion.currentView.setHighlight("calendar"),i.push(a.fetch()),e.when.apply(e,i).done(function(){r.filter=a.get("unit").id,a.get("attendance").length&&s.add(a.get("attendance")),i=[],i.push(r.fetch()),e.when.apply(e,i).done(function(){n.showView(o),o.attendanceRegion.show(l)})})},assignment_add:function(e){this.assignment_edit(null,e)},assignment_edit:function(t,n){var i=this,a=[],r=new s,o=new N(null,{children:!0,members:!0,flat:!0}),l=new x(null,{order:"name"}),c=new F({model:r,units:o,positions:l});this.app.navRegion.currentView.setHighlight("roster"),a.push(o.fetch(),l.fetch()),t&&(r.id=t,a.push(r.fetch())),n&&r.set("member",{id:n}),e.when.apply(e,a).done(function(){i.showView(c)})},calendar:function(){var t=this,n=[],i=new v,a=new d(null,{current:!0}),r=new C({collection:i,userAssignments:a});this.app.navRegion.currentView.setHighlight("calendar"),n.push(a.fetch()),e.when.apply(e,n).done(function(){t.showView(r)})},discharge:function(t){var n=this,i=[],a=new o({id:t}),r=new O({model:a});this.app.navRegion.currentView.setHighlight("roster"),i.push(a.fetch()),e.when.apply(e,i).done(function(){n.showView(r)})},enlistment:function(t){var n=this,i=[],a=new l({id:t}),r=new w;this.permissions||(this.permissions=new w,i.push(this.permissions.fetch()));var s=new M({model:a,permissions:this.permissions,memberPermissions:r});this.app.navRegion.currentView.setHighlight("enlistments"),i.push(a.fetch()),e.when.apply(e,i).done(function(){r.member_id=a.get("member").id,i=[],i.push(r.fetch()),e.when.apply(e,i).done(function(){n.showView(s)})})},enlistments:function(){var t=this,n=[],i=new f,a=new D({collection:i});this.app.navRegion.currentView.setHighlight("enlistments"),n.push(i.fetch()),e.when.apply(e,n).done(function(){t.showView(a)})},enlistment_edit:function(t){var n=this,i=[],a=new l,r=new R({model:a});this.app.navRegion.currentView.setHighlight("enlistments"),t?(a.id=t,i.push(a.fetch()),e.when.apply(e,i).done(function(){n.showView(r)})):n.showView(r)},enlistment_process:function(t){var n=this,i=[],a=new l({id:t}),r=new N(null,{filter:"TPs",children:!0,inactive:!0}),s=new N(null,{children:!0,members:!0,flat:!0}),o=new q({model:a,tps:r,units:s});this.app.navRegion.currentView.setHighlight("enlistments"),i.push(a.fetch(),r.fetch(),s.fetch()),e.when.apply(e,i).done(function(){n.showView(o)})},event:function(t){var n=this,i=[],a=new d(null,{current:!0}),r=new c({id:t}),s=new g(null,{id:t}),o=new w;this.permissions||(this.permissions=new w,i.push(this.permissions.fetch()));var l=new P({model:r,collection:s,user:this.user,userAssignments:a,permissions:this.permissions,unitPermissions:o});this.app.navRegion.currentView.setHighlight("calendar"),i.push(r.fetch(),a.fetch()),e.when.apply(e,i).done(function(){r.get("attendance").length&&s.add(r.get("attendance")),o.unit_id=r.get("unit").id,i=[],i.push(o.fetch()),e.when.apply(e,i).done(function(){n.showView(l)})})},flash:function(e,t){var n=new L({msg:e,type:t});this.app.flashRegion.show(n)},member:function(t,n){var i=this,a=[],r=new h({id:t}),s=new d(null,{member_id:t}),o=new w(null,{member_id:t});this.permissions||(this.permissions=new w,a.push(this.permissions.fetch()));var l=new V({model:r,assignments:s}),c=new T({permissions:this.permissions,memberPermissions:o});this.app.navRegion.currentView.setHighlight("roster"),a.push(r.fetch(),s.fetch(),o.fetch());
var u;if(n=n?n.replace(/\//g,""):"","servicerecord"==n){l.setHighlight("servicerecord");var f=new A(null,{member_id:t});a.push(f.fetch());var g=new p(null,{member_id:t});a.push(g.fetch());var v=new m(null,{member_id:t});a.push(v.fetch());var y=new _(null,{member_id:t});a.push(y.fetch()),u=new W({model:r,permissions:this.permissions,memberPermissions:o,assignments:s,promotions:f,awardings:g,discharges:v,enlistments:y})}else if("attendance"==n){l.setHighlight("attendance");var x=new b(null,{member_id:t});a.push(x.fetch()),u=new H({collection:x})}else if("qualifications"==n){l.setHighlight("qualifications");var S=new k(null,{member_id:t});a.push(S.fetch());var E=new p(null,{member_id:t});a.push(E.fetch()),u=new z({collection:S,awards:E})}else"edit"==n?(l.setHighlight("profile"),u=new U({model:r})):"discharge"==n?(l.setHighlight("profile"),u=new j({model:r})):(l.setHighlight("profile"),u=new B({model:r}));e.when.apply(e,a).done(function(){i.showView(l),l.adminRegion.show(c),u&&l.pageRegion.show(u)})},roster:function(t){var n=this,i=[],a=new N(null,{filter:t||"Bn",children:!0,members:!0}),r=new G({collection:a});this.app.navRegion.currentView.setHighlight("roster"),i.push(a.fetch()),e.when.apply(e,i).done(function(){n.showView(r)})},unit:function(t,n){var i=this,a=[],r=new N(null,{filter:t||"Bn"}),s=new K({collection:r});this.app.navRegion.currentView.setHighlight("roster");var o;if(n=n?n.replace(/\//g,""):"","attendance"==n){s.setHighlight("attendance");var l=new S(null,{filter:t||"Bn"});a.push(l.fetch()),o=new J({collection:l})}else if("awols"==n){s.setHighlight("awols");var c=new E(null,{filter:t||"Bn"});a.push(c.fetch()),o=new Y({collection:c})}else s.setHighlight("roster"),r.children=!0,r.members=!0,o=new G({collection:r});a.push(r.fetch()),e.when.apply(e,a).done(function(){i.showView(s),o&&s.pageRegion.show(o)})}})}),window.requirejs=window.requirejs||{},function(e){e.config({baseUrl:"scripts/",paths:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min","../vendor/jquery/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min","../vendor/underscore/underscore-min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.0/backbone-min","../vendor/backbone/backbone"],handlebars:"../vendor/handlebars/handlebars.min",marionette:["//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.5.1-bundled/backbone.marionette.min","../vendor/marionette/lib/backbone.marionette.min"],"backbone.wreqr":"../vendor/backbone.wreqr/lib/amd/backbone.wreqr.min","jquery-bootstrap":["//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.0/js/bootstrap.min","../vendor/bootstrap/dist/js/bootstrap.min"],moment:["//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min","../vendor/moment/min/moment.min"],fullcalendar:["//cdnjs.cloudflare.com/ajax/libs/fullcalendar/1.6.4/fullcalendar.min","../vendor/fullcalendar/fullcalendar.min"],"vanilla-comments":"//new.29th.org/forums/js/embed",nprogress:["//cdnjs.cloudflare.com/ajax/libs/nprogress/0.1.3/nprogress.min","../vendor/nprogress/nprogress"],bbcode:"../vendor/bbcode/src/bbcode","bootstrap-datepicker":["//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min","../vendor/bootstrap-datepicker/js/bootstrap-datepicker"],"backbone.validation":"../vendor/backbone.validation/dist/backbone-validation-amd-min","bootstrap-select":["//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.2/js/bootstrap-select.min","../vendor/bootstrap-select/dist/js/bootstrap-select.min"],text:"../vendor/text/text",hbs:"hbs",json:"../vendor/requirejs-plugins/src/json",config:"config.dev"},shim:{underscore:{exports:"_"},backbone:{exports:"Backbone",deps:["jquery","underscore"]},handlebars:{exports:"Handlebars"},marionette:{exports:"Marionette",deps:["jquery","underscore","backbone"]},"jquery-jsonp":{deps:["jquery"]},"jquery-bootstrap":{deps:["jquery"]},fullcalendar:{deps:["jquery"]},nprogress:{exports:"NProgress"},"bootstrap-datepicker":{deps:["jquery"]},"bootstrap-select":{deps:["jquery"]},"handlebars.helpers":{deps:["handlebars"]},"backbone.validation":{deps:["jquery","underscore","backbone"]},"validation.config":{deps:["backbone.validation"]}},hbs:{templateExtension:".html"}}),require(["jquery","util","router"],function(e,t,n){window.DEBUG=!1,e.ajaxSetup({cache:!0,xhrFields:{withCredentials:!0}}),e(document).ajaxStart(function(){t.loading(!0)}),e(document).ajaxStop(function(){t.loading(!1)});var i=new Backbone.Marionette.Application;i.addRegions({mainRegion:"#main",navRegion:"#nav",flashRegion:"#flash"}),i.addInitializer(function(){new n({app:this}),Backbone.history.start()}),i.start()})}(window.requirejs),define("main",function(){});